{% extends "admin/base.html" %}

{% block title %}Quản Lý Thư Viện{% endblock %}
{% block page_title %}Quản Lý Thư Viện Ảnh/Video{% endblock %}

{% block content %}
<div class="bg-white rounded-xl shadow-sm">
    <div class="p-6 border-b flex items-center justify-between">
        <h2 class="text-lg font-semibold">Thư Viện</h2>
        <a href="{{ url_for('admin.gallery_create') }}" class="bg-primary text-white px-4 py-2 rounded-lg"><i class="fas fa-plus mr-2"></i>Thêm Mới</a>
    </div>
    <div class="p-6 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
        {% for item in items %}
        <div class="relative group">
            {% if item.type == 'image' %}
                <img src="{{ item.url }}" class="w-full h-32 object-cover rounded-lg">
            {% else %}
                <div class="w-full h-32 bg-gray-800 rounded-lg flex items-center justify-center">
                    <i class="fas fa-play-circle text-4xl text-white"></i>
                </div>
            {% endif %}
            <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition rounded-lg flex items-center justify-center space-x-2">
                <button onclick="copyUrl('{{ item.url }}')" class="bg-white text-green-600 p-2 rounded-full hover:bg-green-100" title="Copy URL"><i class="fas fa-link"></i></button>
                <a href="{{ url_for('admin.gallery_edit', id=item.id) }}" class="bg-white text-gray-800 p-2 rounded-full hover:bg-blue-100" title="Chỉnh sửa"><i class="fas fa-edit"></i></a>
                <form action="{{ url_for('admin.gallery_delete', id=item.id) }}" method="POST" class="inline" onsubmit="return confirm('Xóa?')"><input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="bg-white text-red-600 p-2 rounded-full hover:bg-red-100" title="Xóa"><i class="fas fa-trash"></i></button>
                </form>
            </div>
            <div class="mt-2 text-sm text-gray-600 truncate">{{ item.title_vi or 'Không có tiêu đề' }}</div>
        </div>
        {% else %}
        <div class="col-span-full text-center py-12 text-gray-500">Chưa có ảnh/video nào.</div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function copyUrl(url) {
    navigator.clipboard.writeText(url).then(function() {
        alert('Đã copy URL: ' + url);
    }).catch(function() {
        prompt('Copy URL này:', url);
    });
}
</script>
{% endblock %}
