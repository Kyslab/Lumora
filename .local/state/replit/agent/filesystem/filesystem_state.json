{"file_contents":{"models.py":{"content":"from flask_sqlalchemy import SQLAlchemy\nfrom flask_login import UserMixin\nfrom werkzeug.security import generate_password_hash, check_password_hash\nfrom datetime import datetime\n\ndb = SQLAlchemy()\n\nclass User(UserMixin, db.Model):\n    __tablename__ = 'users'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    username = db.Column(db.String(80), unique=True, nullable=False)\n    email = db.Column(db.String(120), unique=True, nullable=False)\n    password_hash = db.Column(db.String(256), nullable=False)\n    is_admin = db.Column(db.Boolean, default=False)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    last_login = db.Column(db.DateTime)\n    \n    def set_password(self, password):\n        self.password_hash = generate_password_hash(password)\n    \n    def check_password(self, password):\n        return check_password_hash(self.password_hash, password)\n\nclass Room(db.Model):\n    __tablename__ = 'rooms'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    name_vi = db.Column(db.String(200), nullable=False)\n    name_en = db.Column(db.String(200), nullable=False)\n    description_vi = db.Column(db.Text)\n    description_en = db.Column(db.Text)\n    price = db.Column(db.Integer)\n    area = db.Column(db.Integer)\n    capacity = db.Column(db.Integer)\n    room_type = db.Column(db.String(50))\n    amenities = db.Column(db.Text)\n    video_url = db.Column(db.String(500))\n    is_featured = db.Column(db.Boolean, default=False)\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    images = db.relationship('RoomImage', backref='room', lazy=True, cascade='all, delete-orphan')\n\nclass RoomImage(db.Model):\n    __tablename__ = 'room_images'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    room_id = db.Column(db.Integer, db.ForeignKey('rooms.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    alt_vi = db.Column(db.String(200))\n    alt_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass Restaurant(db.Model):\n    __tablename__ = 'restaurants'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    name_vi = db.Column(db.String(200), nullable=False)\n    name_en = db.Column(db.String(200), nullable=False)\n    description_vi = db.Column(db.Text)\n    description_en = db.Column(db.Text)\n    category_vi = db.Column(db.String(100))\n    category_en = db.Column(db.String(100))\n    hours = db.Column(db.String(100))\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    images = db.relationship('RestaurantImage', backref='restaurant', lazy=True, cascade='all, delete-orphan')\n    menu_items = db.relationship('MenuItem', backref='restaurant', lazy=True, cascade='all, delete-orphan')\n\nclass RestaurantImage(db.Model):\n    __tablename__ = 'restaurant_images'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    restaurant_id = db.Column(db.Integer, db.ForeignKey('restaurants.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    alt_vi = db.Column(db.String(200))\n    alt_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass MenuItem(db.Model):\n    __tablename__ = 'menu_items'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    restaurant_id = db.Column(db.Integer, db.ForeignKey('restaurants.id'), nullable=False)\n    name_vi = db.Column(db.String(200), nullable=False)\n    name_en = db.Column(db.String(200), nullable=False)\n    description_vi = db.Column(db.Text)\n    description_en = db.Column(db.Text)\n    price = db.Column(db.Integer)\n    sort_order = db.Column(db.Integer, default=0)\n\nclass Amenity(db.Model):\n    __tablename__ = 'amenities'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    name_vi = db.Column(db.String(200), nullable=False)\n    name_en = db.Column(db.String(200), nullable=False)\n    description_vi = db.Column(db.Text)\n    description_en = db.Column(db.Text)\n    icon = db.Column(db.String(50))\n    video_url = db.Column(db.String(500))\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    images = db.relationship('AmenityImage', backref='amenity', lazy=True, cascade='all, delete-orphan')\n\nclass AmenityImage(db.Model):\n    __tablename__ = 'amenity_images'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    amenity_id = db.Column(db.Integer, db.ForeignKey('amenities.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    alt_vi = db.Column(db.String(200))\n    alt_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass Experience(db.Model):\n    __tablename__ = 'experiences'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    title_vi = db.Column(db.String(200), nullable=False)\n    title_en = db.Column(db.String(200), nullable=False)\n    short_desc_vi = db.Column(db.Text)\n    short_desc_en = db.Column(db.Text)\n    content_vi = db.Column(db.Text)\n    content_en = db.Column(db.Text)\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    images = db.relationship('ExperienceImage', backref='experience', lazy=True, cascade='all, delete-orphan')\n    videos = db.relationship('ExperienceVideo', backref='experience', lazy=True, cascade='all, delete-orphan')\n\nclass ExperienceImage(db.Model):\n    __tablename__ = 'experience_images'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    experience_id = db.Column(db.Integer, db.ForeignKey('experiences.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    alt_vi = db.Column(db.String(200))\n    alt_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass ExperienceVideo(db.Model):\n    __tablename__ = 'experience_videos'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    experience_id = db.Column(db.Integer, db.ForeignKey('experiences.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    title_vi = db.Column(db.String(200))\n    title_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass SteamProgram(db.Model):\n    __tablename__ = 'steam_programs'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    title_vi = db.Column(db.String(200), nullable=False)\n    title_en = db.Column(db.String(200), nullable=False)\n    short_desc_vi = db.Column(db.Text)\n    short_desc_en = db.Column(db.Text)\n    content_vi = db.Column(db.Text)\n    content_en = db.Column(db.Text)\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    images = db.relationship('SteamImage', backref='steam_program', lazy=True, cascade='all, delete-orphan')\n    videos = db.relationship('SteamVideo', backref='steam_program', lazy=True, cascade='all, delete-orphan')\n\nclass SteamImage(db.Model):\n    __tablename__ = 'steam_images'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    steam_id = db.Column(db.Integer, db.ForeignKey('steam_programs.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    alt_vi = db.Column(db.String(200))\n    alt_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass SteamVideo(db.Model):\n    __tablename__ = 'steam_videos'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    steam_id = db.Column(db.Integer, db.ForeignKey('steam_programs.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    title_vi = db.Column(db.String(200))\n    title_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass Event(db.Model):\n    __tablename__ = 'events'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    title_vi = db.Column(db.String(200), nullable=False)\n    title_en = db.Column(db.String(200), nullable=False)\n    description_vi = db.Column(db.Text)\n    description_en = db.Column(db.Text)\n    capacity = db.Column(db.Integer)\n    price = db.Column(db.Integer)\n    features = db.Column(db.Text)\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    images = db.relationship('EventImage', backref='event', lazy=True, cascade='all, delete-orphan')\n\nclass EventImage(db.Model):\n    __tablename__ = 'event_images'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    event_id = db.Column(db.Integer, db.ForeignKey('events.id'), nullable=False)\n    url = db.Column(db.String(500), nullable=False)\n    alt_vi = db.Column(db.String(200))\n    alt_en = db.Column(db.String(200))\n    sort_order = db.Column(db.Integer, default=0)\n\nclass News(db.Model):\n    __tablename__ = 'news'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    slug = db.Column(db.String(100), unique=True, nullable=False)\n    title_vi = db.Column(db.String(200), nullable=False)\n    title_en = db.Column(db.String(200), nullable=False)\n    excerpt_vi = db.Column(db.Text)\n    excerpt_en = db.Column(db.Text)\n    content_vi = db.Column(db.Text)\n    content_en = db.Column(db.Text)\n    category = db.Column(db.String(50))\n    image_url = db.Column(db.String(500))\n    status = db.Column(db.String(20), default='draft')\n    published_at = db.Column(db.DateTime)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n\nclass GalleryItem(db.Model):\n    __tablename__ = 'gallery_items'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    type = db.Column(db.String(20), nullable=False)\n    title_vi = db.Column(db.String(200))\n    title_en = db.Column(db.String(200))\n    url = db.Column(db.String(500), nullable=False)\n    thumb_url = db.Column(db.String(500))\n    category = db.Column(db.String(50))\n    sort_order = db.Column(db.Integer, default=0)\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n\nclass Contact(db.Model):\n    __tablename__ = 'contacts'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(200), nullable=False)\n    email = db.Column(db.String(120))\n    phone = db.Column(db.String(20))\n    subject = db.Column(db.String(200))\n    message = db.Column(db.Text)\n    contact_type = db.Column(db.String(50))\n    status = db.Column(db.String(20), default='new')\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n\nclass Banner(db.Model):\n    __tablename__ = 'banners'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    title_vi = db.Column(db.String(200), nullable=False)\n    title_en = db.Column(db.String(200), nullable=False)\n    subtitle_vi = db.Column(db.String(300))\n    subtitle_en = db.Column(db.String(300))\n    description_vi = db.Column(db.Text)\n    description_en = db.Column(db.Text)\n    button_text_vi = db.Column(db.String(100))\n    button_text_en = db.Column(db.String(100))\n    button_link = db.Column(db.String(500))\n    image_url = db.Column(db.String(500), nullable=False)\n    icon = db.Column(db.String(50))\n    sort_order = db.Column(db.Integer, default=0)\n    is_active = db.Column(db.Boolean, default=True)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n","path":null,"size_bytes":12360,"size_tokens":null},"admin.py":{"content":"from flask import Blueprint, render_template, request, redirect, url_for, flash, jsonify\nfrom flask_login import login_user, logout_user, login_required, current_user\nfrom functools import wraps\nfrom models import db, User, Room, RoomImage, Restaurant, RestaurantImage, MenuItem\nfrom models import Amenity, AmenityImage, Experience, ExperienceImage, ExperienceVideo\nfrom models import SteamProgram, SteamImage, SteamVideo, Event, EventImage, News, GalleryItem, Contact, Banner\nfrom datetime import datetime\nimport os\nimport uuid\nfrom werkzeug.utils import secure_filename\n\nadmin_bp = Blueprint('admin', __name__, url_prefix='/admin')\n\nUPLOAD_FOLDER = 'static/uploads'\nALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'webp'}\n\ndef allowed_file(filename):\n    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\ndef save_uploaded_file(file, subfolder):\n    \"\"\"Save uploaded file and return the URL path\"\"\"\n    if file and file.filename and allowed_file(file.filename):\n        filename = secure_filename(file.filename)\n        unique_filename = f\"{uuid.uuid4().hex}_{filename}\"\n        \n        upload_path = os.path.join(UPLOAD_FOLDER, subfolder)\n        os.makedirs(upload_path, exist_ok=True)\n        \n        file_path = os.path.join(upload_path, unique_filename)\n        file.save(file_path)\n        \n        return f\"/{file_path}\"\n    return None\n\ndef admin_required(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        if not current_user.is_authenticated or not current_user.is_admin:\n            flash('Bạn cần đăng nhập với tài khoản admin.', 'error')\n            return redirect(url_for('admin.login'))\n        return f(*args, **kwargs)\n    return decorated_function\n\n@admin_bp.route('/login', methods=['GET', 'POST'])\ndef login():\n    if current_user.is_authenticated and current_user.is_admin:\n        return redirect(url_for('admin.dashboard'))\n    \n    if request.method == 'POST':\n        username = request.form.get('username')\n        password = request.form.get('password')\n        \n        user = User.query.filter_by(username=username).first()\n        \n        if user and user.check_password(password) and user.is_admin:\n            user.last_login = datetime.utcnow()\n            db.session.commit()\n            login_user(user)\n            flash('Đăng nhập thành công!', 'success')\n            return redirect(url_for('admin.dashboard'))\n        else:\n            flash('Tên đăng nhập hoặc mật khẩu không đúng.', 'error')\n    \n    return render_template('admin/login.html')\n\n@admin_bp.route('/logout')\n@login_required\ndef logout():\n    logout_user()\n    flash('Đã đăng xuất.', 'success')\n    return redirect(url_for('admin.login'))\n\n@admin_bp.route('/')\n@admin_required\ndef dashboard():\n    stats = {\n        'rooms': Room.query.count(),\n        'restaurants': Restaurant.query.count(),\n        'amenities': Amenity.query.count(),\n        'experiences': Experience.query.count(),\n        'steam': SteamProgram.query.count(),\n        'events': Event.query.count(),\n        'news': News.query.count(),\n        'gallery': GalleryItem.query.count(),\n        'contacts': Contact.query.filter_by(status='new').count()\n    }\n    recent_contacts = Contact.query.order_by(Contact.created_at.desc()).limit(5).all()\n    return render_template('admin/dashboard.html', stats=stats, recent_contacts=recent_contacts)\n\n@admin_bp.route('/rooms')\n@admin_required\ndef rooms_list():\n    rooms = Room.query.order_by(Room.created_at.desc()).all()\n    return render_template('admin/rooms/list.html', rooms=rooms)\n\n@admin_bp.route('/rooms/create', methods=['GET', 'POST'])\n@admin_required\ndef rooms_create():\n    if request.method == 'POST':\n        room = Room(\n            slug=request.form.get('slug'),\n            name_vi=request.form.get('name_vi'),\n            name_en=request.form.get('name_en'),\n            description_vi=request.form.get('description_vi'),\n            description_en=request.form.get('description_en'),\n            price=int(request.form.get('price', 0)) if request.form.get('price') else None,\n            area=int(request.form.get('area', 0)) if request.form.get('area') else None,\n            capacity=int(request.form.get('capacity', 0)) if request.form.get('capacity') else None,\n            room_type=request.form.get('room_type'),\n            amenities=request.form.get('amenities'),\n            video_url=request.form.get('video_url'),\n            is_featured=request.form.get('is_featured') == 'on',\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(room)\n        db.session.commit()\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        \n        sort_order = 0\n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'rooms')\n                if url:\n                    room_img = RoomImage(room_id=room.id, url=url, sort_order=sort_order)\n                    db.session.add(room_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                room_img = RoomImage(room_id=room.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(room_img)\n                sort_order += 1\n        \n        db.session.commit()\n        \n        flash('Đã tạo phòng mới thành công!', 'success')\n        return redirect(url_for('admin.rooms_list'))\n    \n    return render_template('admin/rooms/form.html', room=None)\n\n@admin_bp.route('/rooms/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef rooms_edit(id):\n    room = Room.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        room.slug = request.form.get('slug')\n        room.name_vi = request.form.get('name_vi')\n        room.name_en = request.form.get('name_en')\n        room.description_vi = request.form.get('description_vi')\n        room.description_en = request.form.get('description_en')\n        room.price = int(request.form.get('price', 0)) if request.form.get('price') else None\n        room.area = int(request.form.get('area', 0)) if request.form.get('area') else None\n        room.capacity = int(request.form.get('capacity', 0)) if request.form.get('capacity') else None\n        room.room_type = request.form.get('room_type')\n        room.amenities = request.form.get('amenities')\n        room.video_url = request.form.get('video_url')\n        room.is_featured = request.form.get('is_featured') == 'on'\n        room.is_active = request.form.get('is_active') == 'on'\n        \n        keep_images = request.form.getlist('keep_images[]')\n        RoomImage.query.filter(RoomImage.room_id == room.id, ~RoomImage.id.in_([int(x) for x in keep_images if x])).delete(synchronize_session=False)\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        \n        max_order = db.session.query(db.func.max(RoomImage.sort_order)).filter_by(room_id=room.id).scalar() or -1\n        sort_order = max_order + 1\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'rooms')\n                if url:\n                    room_img = RoomImage(room_id=room.id, url=url, sort_order=sort_order)\n                    db.session.add(room_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                room_img = RoomImage(room_id=room.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(room_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã cập nhật phòng thành công!', 'success')\n        return redirect(url_for('admin.rooms_list'))\n    \n    return render_template('admin/rooms/form.html', room=room)\n\n@admin_bp.route('/rooms/<int:id>/delete', methods=['POST'])\n@admin_required\ndef rooms_delete(id):\n    room = Room.query.get_or_404(id)\n    db.session.delete(room)\n    db.session.commit()\n    flash('Đã xóa phòng thành công!', 'success')\n    return redirect(url_for('admin.rooms_list'))\n\n@admin_bp.route('/restaurants')\n@admin_required\ndef restaurants_list():\n    restaurants = Restaurant.query.order_by(Restaurant.created_at.desc()).all()\n    return render_template('admin/restaurants/list.html', restaurants=restaurants)\n\n@admin_bp.route('/restaurants/create', methods=['GET', 'POST'])\n@admin_required\ndef restaurants_create():\n    if request.method == 'POST':\n        restaurant = Restaurant(\n            slug=request.form.get('slug'),\n            name_vi=request.form.get('name_vi'),\n            name_en=request.form.get('name_en'),\n            description_vi=request.form.get('description_vi'),\n            description_en=request.form.get('description_en'),\n            category_vi=request.form.get('category_vi'),\n            category_en=request.form.get('category_en'),\n            hours=request.form.get('hours'),\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(restaurant)\n        db.session.commit()\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        sort_order = 0\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'restaurants')\n                if url:\n                    rest_img = RestaurantImage(restaurant_id=restaurant.id, url=url, sort_order=sort_order)\n                    db.session.add(rest_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                rest_img = RestaurantImage(restaurant_id=restaurant.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(rest_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã tạo nhà hàng mới thành công!', 'success')\n        return redirect(url_for('admin.restaurants_list'))\n    \n    return render_template('admin/restaurants/form.html', restaurant=None)\n\n@admin_bp.route('/restaurants/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef restaurants_edit(id):\n    restaurant = Restaurant.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        restaurant.slug = request.form.get('slug')\n        restaurant.name_vi = request.form.get('name_vi')\n        restaurant.name_en = request.form.get('name_en')\n        restaurant.description_vi = request.form.get('description_vi')\n        restaurant.description_en = request.form.get('description_en')\n        restaurant.category_vi = request.form.get('category_vi')\n        restaurant.category_en = request.form.get('category_en')\n        restaurant.hours = request.form.get('hours')\n        restaurant.is_active = request.form.get('is_active') == 'on'\n        \n        keep_images = request.form.getlist('keep_images[]')\n        RestaurantImage.query.filter(RestaurantImage.restaurant_id == restaurant.id, ~RestaurantImage.id.in_([int(x) for x in keep_images if x])).delete(synchronize_session=False)\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        max_order = db.session.query(db.func.max(RestaurantImage.sort_order)).filter_by(restaurant_id=restaurant.id).scalar() or -1\n        sort_order = max_order + 1\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'restaurants')\n                if url:\n                    rest_img = RestaurantImage(restaurant_id=restaurant.id, url=url, sort_order=sort_order)\n                    db.session.add(rest_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                rest_img = RestaurantImage(restaurant_id=restaurant.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(rest_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã cập nhật nhà hàng thành công!', 'success')\n        return redirect(url_for('admin.restaurants_list'))\n    \n    return render_template('admin/restaurants/form.html', restaurant=restaurant)\n\n@admin_bp.route('/restaurants/<int:id>/delete', methods=['POST'])\n@admin_required\ndef restaurants_delete(id):\n    restaurant = Restaurant.query.get_or_404(id)\n    db.session.delete(restaurant)\n    db.session.commit()\n    flash('Đã xóa nhà hàng thành công!', 'success')\n    return redirect(url_for('admin.restaurants_list'))\n\n@admin_bp.route('/amenities')\n@admin_required\ndef amenities_list():\n    amenities = Amenity.query.order_by(Amenity.created_at.desc()).all()\n    return render_template('admin/amenities/list.html', amenities=amenities)\n\n@admin_bp.route('/amenities/create', methods=['GET', 'POST'])\n@admin_required\ndef amenities_create():\n    if request.method == 'POST':\n        amenity = Amenity(\n            slug=request.form.get('slug'),\n            name_vi=request.form.get('name_vi'),\n            name_en=request.form.get('name_en'),\n            description_vi=request.form.get('description_vi'),\n            description_en=request.form.get('description_en'),\n            icon=request.form.get('icon'),\n            video_url=request.form.get('video_url'),\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(amenity)\n        db.session.commit()\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        sort_order = 0\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'amenities')\n                if url:\n                    am_img = AmenityImage(amenity_id=amenity.id, url=url, sort_order=sort_order)\n                    db.session.add(am_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                am_img = AmenityImage(amenity_id=amenity.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(am_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã tạo tiện ích mới thành công!', 'success')\n        return redirect(url_for('admin.amenities_list'))\n    \n    return render_template('admin/amenities/form.html', amenity=None)\n\n@admin_bp.route('/amenities/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef amenities_edit(id):\n    amenity = Amenity.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        amenity.slug = request.form.get('slug')\n        amenity.name_vi = request.form.get('name_vi')\n        amenity.name_en = request.form.get('name_en')\n        amenity.description_vi = request.form.get('description_vi')\n        amenity.description_en = request.form.get('description_en')\n        amenity.icon = request.form.get('icon')\n        amenity.video_url = request.form.get('video_url')\n        amenity.is_active = request.form.get('is_active') == 'on'\n        \n        keep_images = request.form.getlist('keep_images[]')\n        AmenityImage.query.filter(AmenityImage.amenity_id == amenity.id, ~AmenityImage.id.in_([int(x) for x in keep_images if x])).delete(synchronize_session=False)\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        max_order = db.session.query(db.func.max(AmenityImage.sort_order)).filter_by(amenity_id=amenity.id).scalar() or -1\n        sort_order = max_order + 1\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'amenities')\n                if url:\n                    am_img = AmenityImage(amenity_id=amenity.id, url=url, sort_order=sort_order)\n                    db.session.add(am_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                am_img = AmenityImage(amenity_id=amenity.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(am_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã cập nhật tiện ích thành công!', 'success')\n        return redirect(url_for('admin.amenities_list'))\n    \n    return render_template('admin/amenities/form.html', amenity=amenity)\n\n@admin_bp.route('/amenities/<int:id>/delete', methods=['POST'])\n@admin_required\ndef amenities_delete(id):\n    amenity = Amenity.query.get_or_404(id)\n    db.session.delete(amenity)\n    db.session.commit()\n    flash('Đã xóa tiện ích thành công!', 'success')\n    return redirect(url_for('admin.amenities_list'))\n\n@admin_bp.route('/experiences')\n@admin_required\ndef experiences_list():\n    experiences = Experience.query.order_by(Experience.created_at.desc()).all()\n    return render_template('admin/experiences/list.html', experiences=experiences)\n\n@admin_bp.route('/experiences/create', methods=['GET', 'POST'])\n@admin_required\ndef experiences_create():\n    if request.method == 'POST':\n        experience = Experience(\n            slug=request.form.get('slug'),\n            title_vi=request.form.get('title_vi'),\n            title_en=request.form.get('title_en'),\n            short_desc_vi=request.form.get('short_desc_vi'),\n            short_desc_en=request.form.get('short_desc_en'),\n            content_vi=request.form.get('content_vi'),\n            content_en=request.form.get('content_en'),\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(experience)\n        db.session.commit()\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        sort_order = 0\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'experiences')\n                if url:\n                    exp_img = ExperienceImage(experience_id=experience.id, url=url, sort_order=sort_order)\n                    db.session.add(exp_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                exp_img = ExperienceImage(experience_id=experience.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(exp_img)\n                sort_order += 1\n        \n        video_urls = request.form.getlist('video_urls[]')\n        video_titles_vi = request.form.getlist('video_titles_vi[]')\n        video_titles_en = request.form.getlist('video_titles_en[]')\n        for i, video_url in enumerate(video_urls):\n            if video_url:\n                exp_vid = ExperienceVideo(\n                    experience_id=experience.id,\n                    url=video_url,\n                    title_vi=video_titles_vi[i] if i < len(video_titles_vi) else '',\n                    title_en=video_titles_en[i] if i < len(video_titles_en) else '',\n                    sort_order=i\n                )\n                db.session.add(exp_vid)\n        \n        db.session.commit()\n        flash('Đã tạo trải nghiệm mới thành công!', 'success')\n        return redirect(url_for('admin.experiences_list'))\n    \n    return render_template('admin/experiences/form.html', experience=None)\n\n@admin_bp.route('/experiences/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef experiences_edit(id):\n    experience = Experience.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        experience.slug = request.form.get('slug')\n        experience.title_vi = request.form.get('title_vi')\n        experience.title_en = request.form.get('title_en')\n        experience.short_desc_vi = request.form.get('short_desc_vi')\n        experience.short_desc_en = request.form.get('short_desc_en')\n        experience.content_vi = request.form.get('content_vi')\n        experience.content_en = request.form.get('content_en')\n        experience.is_active = request.form.get('is_active') == 'on'\n        \n        keep_images = request.form.getlist('keep_images[]')\n        ExperienceImage.query.filter(ExperienceImage.experience_id == experience.id, ~ExperienceImage.id.in_([int(x) for x in keep_images if x])).delete(synchronize_session=False)\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        max_order = db.session.query(db.func.max(ExperienceImage.sort_order)).filter_by(experience_id=experience.id).scalar() or -1\n        sort_order = max_order + 1\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'experiences')\n                if url:\n                    exp_img = ExperienceImage(experience_id=experience.id, url=url, sort_order=sort_order)\n                    db.session.add(exp_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                exp_img = ExperienceImage(experience_id=experience.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(exp_img)\n                sort_order += 1\n        \n        ExperienceVideo.query.filter_by(experience_id=experience.id).delete()\n        video_urls = request.form.getlist('video_urls[]')\n        video_titles_vi = request.form.getlist('video_titles_vi[]')\n        video_titles_en = request.form.getlist('video_titles_en[]')\n        for i, video_url in enumerate(video_urls):\n            if video_url:\n                exp_vid = ExperienceVideo(\n                    experience_id=experience.id,\n                    url=video_url,\n                    title_vi=video_titles_vi[i] if i < len(video_titles_vi) else '',\n                    title_en=video_titles_en[i] if i < len(video_titles_en) else '',\n                    sort_order=i\n                )\n                db.session.add(exp_vid)\n        \n        db.session.commit()\n        flash('Đã cập nhật trải nghiệm thành công!', 'success')\n        return redirect(url_for('admin.experiences_list'))\n    \n    return render_template('admin/experiences/form.html', experience=experience)\n\n@admin_bp.route('/experiences/<int:id>/delete', methods=['POST'])\n@admin_required\ndef experiences_delete(id):\n    experience = Experience.query.get_or_404(id)\n    db.session.delete(experience)\n    db.session.commit()\n    flash('Đã xóa trải nghiệm thành công!', 'success')\n    return redirect(url_for('admin.experiences_list'))\n\n@admin_bp.route('/steam')\n@admin_required\ndef steam_list():\n    programs = SteamProgram.query.order_by(SteamProgram.created_at.desc()).all()\n    return render_template('admin/steam/list.html', programs=programs)\n\n@admin_bp.route('/steam/create', methods=['GET', 'POST'])\n@admin_required\ndef steam_create():\n    if request.method == 'POST':\n        program = SteamProgram(\n            slug=request.form.get('slug'),\n            title_vi=request.form.get('title_vi'),\n            title_en=request.form.get('title_en'),\n            short_desc_vi=request.form.get('short_desc_vi'),\n            short_desc_en=request.form.get('short_desc_en'),\n            content_vi=request.form.get('content_vi'),\n            content_en=request.form.get('content_en'),\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(program)\n        db.session.commit()\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        sort_order = 0\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'steam')\n                if url:\n                    st_img = SteamImage(steam_id=program.id, url=url, sort_order=sort_order)\n                    db.session.add(st_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                st_img = SteamImage(steam_id=program.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(st_img)\n                sort_order += 1\n        \n        video_urls = request.form.getlist('video_urls[]')\n        video_titles_vi = request.form.getlist('video_titles_vi[]')\n        video_titles_en = request.form.getlist('video_titles_en[]')\n        for i, video_url in enumerate(video_urls):\n            if video_url:\n                st_vid = SteamVideo(\n                    steam_id=program.id,\n                    url=video_url,\n                    title_vi=video_titles_vi[i] if i < len(video_titles_vi) else '',\n                    title_en=video_titles_en[i] if i < len(video_titles_en) else '',\n                    sort_order=i\n                )\n                db.session.add(st_vid)\n        \n        db.session.commit()\n        flash('Đã tạo chương trình STEAM mới thành công!', 'success')\n        return redirect(url_for('admin.steam_list'))\n    \n    return render_template('admin/steam/form.html', program=None)\n\n@admin_bp.route('/steam/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef steam_edit(id):\n    program = SteamProgram.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        program.slug = request.form.get('slug')\n        program.title_vi = request.form.get('title_vi')\n        program.title_en = request.form.get('title_en')\n        program.short_desc_vi = request.form.get('short_desc_vi')\n        program.short_desc_en = request.form.get('short_desc_en')\n        program.content_vi = request.form.get('content_vi')\n        program.content_en = request.form.get('content_en')\n        program.is_active = request.form.get('is_active') == 'on'\n        \n        keep_images = request.form.getlist('keep_images[]')\n        SteamImage.query.filter(SteamImage.steam_id == program.id, ~SteamImage.id.in_([int(x) for x in keep_images if x])).delete(synchronize_session=False)\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        max_order = db.session.query(db.func.max(SteamImage.sort_order)).filter_by(steam_id=program.id).scalar() or -1\n        sort_order = max_order + 1\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'steam')\n                if url:\n                    st_img = SteamImage(steam_id=program.id, url=url, sort_order=sort_order)\n                    db.session.add(st_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                st_img = SteamImage(steam_id=program.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(st_img)\n                sort_order += 1\n        \n        SteamVideo.query.filter_by(steam_id=program.id).delete()\n        video_urls = request.form.getlist('video_urls[]')\n        video_titles_vi = request.form.getlist('video_titles_vi[]')\n        video_titles_en = request.form.getlist('video_titles_en[]')\n        for i, video_url in enumerate(video_urls):\n            if video_url:\n                st_vid = SteamVideo(\n                    steam_id=program.id,\n                    url=video_url,\n                    title_vi=video_titles_vi[i] if i < len(video_titles_vi) else '',\n                    title_en=video_titles_en[i] if i < len(video_titles_en) else '',\n                    sort_order=i\n                )\n                db.session.add(st_vid)\n        \n        db.session.commit()\n        flash('Đã cập nhật chương trình STEAM thành công!', 'success')\n        return redirect(url_for('admin.steam_list'))\n    \n    return render_template('admin/steam/form.html', program=program)\n\n@admin_bp.route('/steam/<int:id>/delete', methods=['POST'])\n@admin_required\ndef steam_delete(id):\n    program = SteamProgram.query.get_or_404(id)\n    db.session.delete(program)\n    db.session.commit()\n    flash('Đã xóa chương trình STEAM thành công!', 'success')\n    return redirect(url_for('admin.steam_list'))\n\n@admin_bp.route('/events')\n@admin_required\ndef events_list():\n    events = Event.query.order_by(Event.created_at.desc()).all()\n    return render_template('admin/events/list.html', events=events)\n\n@admin_bp.route('/events/create', methods=['GET', 'POST'])\n@admin_required\ndef events_create():\n    if request.method == 'POST':\n        event = Event(\n            slug=request.form.get('slug'),\n            title_vi=request.form.get('title_vi'),\n            title_en=request.form.get('title_en'),\n            description_vi=request.form.get('description_vi'),\n            description_en=request.form.get('description_en'),\n            capacity=int(request.form.get('capacity', 0)) if request.form.get('capacity') else None,\n            price=int(request.form.get('price', 0)) if request.form.get('price') else None,\n            features=request.form.get('features'),\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(event)\n        db.session.commit()\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        sort_order = 0\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'events')\n                if url:\n                    ev_img = EventImage(event_id=event.id, url=url, sort_order=sort_order)\n                    db.session.add(ev_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                ev_img = EventImage(event_id=event.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(ev_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã tạo sự kiện mới thành công!', 'success')\n        return redirect(url_for('admin.events_list'))\n    \n    return render_template('admin/events/form.html', event=None)\n\n@admin_bp.route('/events/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef events_edit(id):\n    event = Event.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        event.slug = request.form.get('slug')\n        event.title_vi = request.form.get('title_vi')\n        event.title_en = request.form.get('title_en')\n        event.description_vi = request.form.get('description_vi')\n        event.description_en = request.form.get('description_en')\n        event.capacity = int(request.form.get('capacity', 0)) if request.form.get('capacity') else None\n        event.price = int(request.form.get('price', 0)) if request.form.get('price') else None\n        event.features = request.form.get('features')\n        event.is_active = request.form.get('is_active') == 'on'\n        \n        keep_images = request.form.getlist('keep_images[]')\n        EventImage.query.filter(EventImage.event_id == event.id, ~EventImage.id.in_([int(x) for x in keep_images if x])).delete(synchronize_session=False)\n        \n        uploaded_files = request.files.getlist('image_files[]')\n        image_urls = request.form.getlist('images[]')\n        max_order = db.session.query(db.func.max(EventImage.sort_order)).filter_by(event_id=event.id).scalar() or -1\n        sort_order = max_order + 1\n        \n        for file in uploaded_files:\n            if file and file.filename:\n                url = save_uploaded_file(file, 'events')\n                if url:\n                    ev_img = EventImage(event_id=event.id, url=url, sort_order=sort_order)\n                    db.session.add(ev_img)\n                    sort_order += 1\n        \n        for img_url in image_urls:\n            if img_url and img_url.strip():\n                ev_img = EventImage(event_id=event.id, url=img_url.strip(), sort_order=sort_order)\n                db.session.add(ev_img)\n                sort_order += 1\n        \n        db.session.commit()\n        flash('Đã cập nhật sự kiện thành công!', 'success')\n        return redirect(url_for('admin.events_list'))\n    \n    return render_template('admin/events/form.html', event=event)\n\n@admin_bp.route('/events/<int:id>/delete', methods=['POST'])\n@admin_required\ndef events_delete(id):\n    event = Event.query.get_or_404(id)\n    db.session.delete(event)\n    db.session.commit()\n    flash('Đã xóa sự kiện thành công!', 'success')\n    return redirect(url_for('admin.events_list'))\n\n@admin_bp.route('/news')\n@admin_required\ndef news_list():\n    news_items = News.query.order_by(News.created_at.desc()).all()\n    return render_template('admin/news/list.html', news_items=news_items)\n\n@admin_bp.route('/news/create', methods=['GET', 'POST'])\n@admin_required\ndef news_create():\n    if request.method == 'POST':\n        image_url = request.form.get('image_url', '')\n        \n        uploaded_file = request.files.get('image_file')\n        if uploaded_file and uploaded_file.filename:\n            url = save_uploaded_file(uploaded_file, 'news')\n            if url:\n                image_url = url\n        \n        news = News(\n            slug=request.form.get('slug'),\n            title_vi=request.form.get('title_vi'),\n            title_en=request.form.get('title_en'),\n            excerpt_vi=request.form.get('excerpt_vi'),\n            excerpt_en=request.form.get('excerpt_en'),\n            content_vi=request.form.get('content_vi'),\n            content_en=request.form.get('content_en'),\n            category=request.form.get('category'),\n            image_url=image_url,\n            status=request.form.get('status', 'draft'),\n            published_at=datetime.utcnow() if request.form.get('status') == 'published' else None\n        )\n        db.session.add(news)\n        db.session.commit()\n        \n        flash('Đã tạo tin tức mới thành công!', 'success')\n        return redirect(url_for('admin.news_list'))\n    \n    return render_template('admin/news/form.html', news=None)\n\n@admin_bp.route('/news/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef news_edit(id):\n    news = News.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        news.slug = request.form.get('slug')\n        news.title_vi = request.form.get('title_vi')\n        news.title_en = request.form.get('title_en')\n        news.excerpt_vi = request.form.get('excerpt_vi')\n        news.excerpt_en = request.form.get('excerpt_en')\n        news.content_vi = request.form.get('content_vi')\n        news.content_en = request.form.get('content_en')\n        news.category = request.form.get('category')\n        \n        uploaded_file = request.files.get('image_file')\n        if uploaded_file and uploaded_file.filename:\n            url = save_uploaded_file(uploaded_file, 'news')\n            if url:\n                news.image_url = url\n        elif request.form.get('image_url'):\n            news.image_url = request.form.get('image_url')\n        \n        news.status = request.form.get('status', 'draft')\n        if news.status == 'published' and not news.published_at:\n            news.published_at = datetime.utcnow()\n        \n        db.session.commit()\n        flash('Đã cập nhật tin tức thành công!', 'success')\n        return redirect(url_for('admin.news_list'))\n    \n    return render_template('admin/news/form.html', news=news)\n\n@admin_bp.route('/news/<int:id>/delete', methods=['POST'])\n@admin_required\ndef news_delete(id):\n    news = News.query.get_or_404(id)\n    db.session.delete(news)\n    db.session.commit()\n    flash('Đã xóa tin tức thành công!', 'success')\n    return redirect(url_for('admin.news_list'))\n\n@admin_bp.route('/gallery')\n@admin_required\ndef gallery_list():\n    items = GalleryItem.query.order_by(GalleryItem.sort_order, GalleryItem.created_at.desc()).all()\n    return render_template('admin/gallery/list.html', items=items)\n\n@admin_bp.route('/gallery/create', methods=['GET', 'POST'])\n@admin_required\ndef gallery_create():\n    if request.method == 'POST':\n        item_type = request.form.get('type')\n        url = request.form.get('url', '')\n        thumb_url = request.form.get('thumb_url', '')\n        \n        if item_type == 'image':\n            uploaded_file = request.files.get('image_file')\n            if uploaded_file and uploaded_file.filename:\n                uploaded_url = save_uploaded_file(uploaded_file, 'gallery')\n                if uploaded_url:\n                    url = uploaded_url\n                    thumb_url = uploaded_url\n        \n        item = GalleryItem(\n            type=item_type,\n            title_vi=request.form.get('title_vi'),\n            title_en=request.form.get('title_en'),\n            url=url,\n            thumb_url=thumb_url,\n            category=request.form.get('category'),\n            sort_order=int(request.form.get('sort_order', 0)) if request.form.get('sort_order') else 0,\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(item)\n        db.session.commit()\n        \n        flash('Đã thêm mục gallery mới thành công!', 'success')\n        return redirect(url_for('admin.gallery_list'))\n    \n    return render_template('admin/gallery/form.html', item=None)\n\n@admin_bp.route('/gallery/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef gallery_edit(id):\n    item = GalleryItem.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        item.type = request.form.get('type')\n        item.title_vi = request.form.get('title_vi')\n        item.title_en = request.form.get('title_en')\n        item.category = request.form.get('category')\n        item.sort_order = int(request.form.get('sort_order', 0)) if request.form.get('sort_order') else 0\n        item.is_active = request.form.get('is_active') == 'on'\n        \n        if item.type == 'image':\n            uploaded_file = request.files.get('image_file')\n            if uploaded_file and uploaded_file.filename:\n                uploaded_url = save_uploaded_file(uploaded_file, 'gallery')\n                if uploaded_url:\n                    item.url = uploaded_url\n                    item.thumb_url = uploaded_url\n            elif request.form.get('url'):\n                item.url = request.form.get('url')\n                item.thumb_url = request.form.get('thumb_url') or request.form.get('url')\n        else:\n            item.url = request.form.get('url')\n            item.thumb_url = request.form.get('thumb_url')\n        \n        db.session.commit()\n        flash('Đã cập nhật mục gallery thành công!', 'success')\n        return redirect(url_for('admin.gallery_list'))\n    \n    return render_template('admin/gallery/form.html', item=item)\n\n@admin_bp.route('/gallery/<int:id>/delete', methods=['POST'])\n@admin_required\ndef gallery_delete(id):\n    item = GalleryItem.query.get_or_404(id)\n    db.session.delete(item)\n    db.session.commit()\n    flash('Đã xóa mục gallery thành công!', 'success')\n    return redirect(url_for('admin.gallery_list'))\n\n@admin_bp.route('/contacts')\n@admin_required\ndef contacts_list():\n    contacts = Contact.query.order_by(Contact.created_at.desc()).all()\n    return render_template('admin/contacts/list.html', contacts=contacts)\n\n@admin_bp.route('/contacts/<int:id>')\n@admin_required\ndef contacts_view(id):\n    contact = Contact.query.get_or_404(id)\n    if contact.status == 'new':\n        contact.status = 'read'\n        db.session.commit()\n    return render_template('admin/contacts/view.html', contact=contact)\n\n@admin_bp.route('/contacts/<int:id>/delete', methods=['POST'])\n@admin_required\ndef contacts_delete(id):\n    contact = Contact.query.get_or_404(id)\n    db.session.delete(contact)\n    db.session.commit()\n    flash('Đã xóa liên hệ thành công!', 'success')\n    return redirect(url_for('admin.contacts_list'))\n\n@admin_bp.route('/upload', methods=['POST'])\n@admin_required\ndef upload_file():\n    if 'file' not in request.files:\n        return jsonify({'error': 'No file part'}), 400\n    \n    file = request.files['file']\n    if file.filename == '':\n        return jsonify({'error': 'No selected file'}), 400\n    \n    if file and allowed_file(file.filename):\n        filename = secure_filename(file.filename)\n        timestamp = datetime.utcnow().strftime('%Y%m%d_%H%M%S_')\n        filename = timestamp + filename\n        \n        if not os.path.exists(UPLOAD_FOLDER):\n            os.makedirs(UPLOAD_FOLDER)\n        \n        filepath = os.path.join(UPLOAD_FOLDER, filename)\n        file.save(filepath)\n        \n        return jsonify({'url': '/' + filepath})\n    \n    return jsonify({'error': 'File type not allowed'}), 400\n\n@admin_bp.route('/banners')\n@admin_required\ndef banners_list():\n    banners = Banner.query.order_by(Banner.sort_order, Banner.created_at.desc()).all()\n    return render_template('admin/banners/list.html', banners=banners)\n\n@admin_bp.route('/banners/create', methods=['GET', 'POST'])\n@admin_required\ndef banners_create():\n    if request.method == 'POST':\n        image_url = None\n        \n        uploaded_file = request.files.get('image_file')\n        if uploaded_file and uploaded_file.filename:\n            image_url = save_uploaded_file(uploaded_file, 'banners')\n        \n        if not image_url:\n            image_url = request.form.get('image_url')\n        \n        if not image_url:\n            flash('Vui lòng chọn hình ảnh cho banner.', 'error')\n            return render_template('admin/banners/form.html', banner=None)\n        \n        banner = Banner(\n            title_vi=request.form.get('title_vi'),\n            title_en=request.form.get('title_en'),\n            subtitle_vi=request.form.get('subtitle_vi'),\n            subtitle_en=request.form.get('subtitle_en'),\n            description_vi=request.form.get('description_vi'),\n            description_en=request.form.get('description_en'),\n            button_text_vi=request.form.get('button_text_vi'),\n            button_text_en=request.form.get('button_text_en'),\n            button_link=request.form.get('button_link'),\n            image_url=image_url,\n            icon=request.form.get('icon'),\n            sort_order=int(request.form.get('sort_order', 0)) if request.form.get('sort_order') else 0,\n            is_active=request.form.get('is_active') == 'on'\n        )\n        db.session.add(banner)\n        db.session.commit()\n        \n        flash('Đã tạo banner mới thành công!', 'success')\n        return redirect(url_for('admin.banners_list'))\n    \n    return render_template('admin/banners/form.html', banner=None)\n\n@admin_bp.route('/banners/<int:id>/edit', methods=['GET', 'POST'])\n@admin_required\ndef banners_edit(id):\n    banner = Banner.query.get_or_404(id)\n    \n    if request.method == 'POST':\n        banner.title_vi = request.form.get('title_vi')\n        banner.title_en = request.form.get('title_en')\n        banner.subtitle_vi = request.form.get('subtitle_vi')\n        banner.subtitle_en = request.form.get('subtitle_en')\n        banner.description_vi = request.form.get('description_vi')\n        banner.description_en = request.form.get('description_en')\n        banner.button_text_vi = request.form.get('button_text_vi')\n        banner.button_text_en = request.form.get('button_text_en')\n        banner.button_link = request.form.get('button_link')\n        banner.icon = request.form.get('icon')\n        banner.sort_order = int(request.form.get('sort_order', 0)) if request.form.get('sort_order') else 0\n        banner.is_active = request.form.get('is_active') == 'on'\n        \n        uploaded_file = request.files.get('image_file')\n        if uploaded_file and uploaded_file.filename:\n            image_url = save_uploaded_file(uploaded_file, 'banners')\n            if image_url:\n                banner.image_url = image_url\n        elif request.form.get('image_url'):\n            banner.image_url = request.form.get('image_url')\n        \n        db.session.commit()\n        flash('Đã cập nhật banner thành công!', 'success')\n        return redirect(url_for('admin.banners_list'))\n    \n    return render_template('admin/banners/form.html', banner=banner)\n\n@admin_bp.route('/banners/<int:id>/delete', methods=['POST'])\n@admin_required\ndef banners_delete(id):\n    banner = Banner.query.get_or_404(id)\n    db.session.delete(banner)\n    db.session.commit()\n    flash('Đã xóa banner thành công!', 'success')\n    return redirect(url_for('admin.banners_list'))\n\n@admin_bp.route('/banners/<int:id>/toggle', methods=['POST'])\n@admin_required\ndef banners_toggle(id):\n    banner = Banner.query.get_or_404(id)\n    banner.is_active = not banner.is_active\n    db.session.commit()\n    status = 'bật' if banner.is_active else 'tắt'\n    flash(f'Đã {status} banner thành công!', 'success')\n    return redirect(url_for('admin.banners_list'))\n","path":null,"size_bytes":45086,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"email-validator>=2.3.0\",\n    \"flask>=3.1.2\",\n    \"flask-login>=0.6.3\",\n    \"flask-sqlalchemy>=3.1.1\",\n    \"flask-wtf>=1.2.2\",\n    \"psycopg2-binary>=2.9.11\",\n    \"python-dotenv>=1.2.1\",\n    \"werkzeug>=3.1.4\",\n]\n","path":null,"size_bytes":357,"size_tokens":null},"app.py":{"content":"import os\nimport uuid\nfrom werkzeug.utils import secure_filename\nfrom flask import Flask, render_template, request, jsonify, session\nfrom flask_login import LoginManager\nfrom flask_wtf.csrf import CSRFProtect\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\napp = Flask(__name__)\n\nUPLOAD_FOLDER = 'static/uploads'\nALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'webp'}\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\napp.config['MAX_CONTENT_LENGTH'] = 25 * 1024 * 1024\napp.secret_key = os.environ.get(\"SESSION_SECRET\", \"lumora-resort-secret-key\")\napp.config['SQLALCHEMY_DATABASE_URI'] = os.environ.get(\"DATABASE_URL\")\napp.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False\napp.config['WTF_CSRF_ENABLED'] = True\napp.config['SQLALCHEMY_ENGINE_OPTIONS'] = {\n    'pool_pre_ping': True,\n    'pool_recycle': 300,\n    'pool_size': 5,\n    'max_overflow': 10,\n    'connect_args': {\n        'connect_timeout': 10,\n        'keepalives': 1,\n        'keepalives_idle': 30,\n        'keepalives_interval': 10,\n        'keepalives_count': 5\n    }\n}\n\nfrom models import db, User, Contact, Room, RoomImage, Restaurant, RestaurantImage, MenuItem, Amenity, AmenityImage, Experience, ExperienceImage, ExperienceVideo, SteamProgram, SteamImage, SteamVideo, Event, EventImage, News, GalleryItem, Banner\ndb.init_app(app)\n\ncsrf = CSRFProtect(app)\n\nlogin_manager = LoginManager()\nlogin_manager.init_app(app)\nlogin_manager.login_view = 'admin.login'\n\n@login_manager.user_loader\ndef load_user(user_id):\n    return User.query.get(int(user_id))\n\nfrom admin import admin_bp\napp.register_blueprint(admin_bp)\n\ndef create_admin_user():\n    with app.app_context():\n        db.create_all()\n        admin = User.query.filter_by(username='admin').first()\n        if not admin:\n            admin = User(\n                username='admin',\n                email='admin@lumoraresort.com',\n                is_admin=True\n            )\n            admin.set_password('admin123')\n            db.session.add(admin)\n            db.session.commit()\n            print(\"Admin user created: admin / admin123\")\n\ndef room_to_dict(room):\n    return {\n        \"id\": room.slug,\n        \"slug\": room.slug,\n        \"name\": {\"vi\": room.name_vi, \"en\": room.name_en},\n        \"description\": {\"vi\": room.description_vi or \"\", \"en\": room.description_en or \"\"},\n        \"price\": room.price or 0,\n        \"area\": room.area or 0,\n        \"capacity\": room.capacity or 0,\n        \"room_type\": room.room_type or \"\",\n        \"amenities\": (room.amenities or \"\").split(\"\\n\") if room.amenities else [],\n        \"images\": [img.url for img in room.images],\n        \"video\": room.video_url or \"\",\n        \"is_featured\": room.is_featured\n    }\n\ndef restaurant_to_dict(restaurant):\n    return {\n        \"id\": restaurant.slug,\n        \"slug\": restaurant.slug,\n        \"name\": {\"vi\": restaurant.name_vi, \"en\": restaurant.name_en},\n        \"description\": {\"vi\": restaurant.description_vi or \"\", \"en\": restaurant.description_en or \"\"},\n        \"category\": {\"vi\": restaurant.category_vi or \"\", \"en\": restaurant.category_en or \"\"},\n        \"hours\": restaurant.hours or \"\",\n        \"images\": [img.url for img in restaurant.images],\n        \"menu\": [\n            {\"name\": {\"vi\": item.name_vi, \"en\": item.name_en}, \"price\": item.price or 0}\n            for item in restaurant.menu_items\n        ]\n    }\n\ndef amenity_to_dict(amenity):\n    return {\n        \"id\": amenity.slug,\n        \"slug\": amenity.slug,\n        \"name\": {\"vi\": amenity.name_vi, \"en\": amenity.name_en},\n        \"description\": {\"vi\": amenity.description_vi or \"\", \"en\": amenity.description_en or \"\"},\n        \"icon\": amenity.icon or \"\",\n        \"images\": [img.url for img in amenity.images],\n        \"video\": amenity.video_url or \"\"\n    }\n\ndef experience_to_dict(experience):\n    return {\n        \"id\": experience.slug,\n        \"slug\": experience.slug,\n        \"name\": {\"vi\": experience.title_vi, \"en\": experience.title_en},\n        \"short_desc\": {\"vi\": experience.short_desc_vi or \"\", \"en\": experience.short_desc_en or \"\"},\n        \"content\": {\"vi\": experience.content_vi or \"\", \"en\": experience.content_en or \"\"},\n        \"images\": [img.url for img in experience.images],\n        \"videos\": [\n            {\"url\": vid.url, \"title\": {\"vi\": vid.title_vi or \"\", \"en\": vid.title_en or \"\"}}\n            for vid in experience.videos\n        ]\n    }\n\ndef steam_to_dict(steam):\n    return {\n        \"id\": steam.slug,\n        \"slug\": steam.slug,\n        \"name\": {\"vi\": steam.title_vi, \"en\": steam.title_en},\n        \"short_desc\": {\"vi\": steam.short_desc_vi or \"\", \"en\": steam.short_desc_en or \"\"},\n        \"content\": {\"vi\": steam.content_vi or \"\", \"en\": steam.content_en or \"\"},\n        \"images\": [img.url for img in steam.images],\n        \"videos\": [\n            {\"url\": vid.url, \"title\": {\"vi\": vid.title_vi or \"\", \"en\": vid.title_en or \"\"}}\n            for vid in steam.videos\n        ]\n    }\n\ndef event_to_dict(event):\n    return {\n        \"id\": event.slug,\n        \"slug\": event.slug,\n        \"name\": {\"vi\": event.title_vi, \"en\": event.title_en},\n        \"description\": {\"vi\": event.description_vi or \"\", \"en\": event.description_en or \"\"},\n        \"capacity\": event.capacity or 0,\n        \"price\": event.price or 0,\n        \"features\": (event.features or \"\").split(\"\\n\") if event.features else [],\n        \"images\": [img.url for img in event.images]\n    }\n\ndef news_to_dict(news):\n    return {\n        \"id\": news.id,\n        \"slug\": news.slug,\n        \"title\": {\"vi\": news.title_vi, \"en\": news.title_en},\n        \"excerpt\": {\"vi\": news.excerpt_vi or \"\", \"en\": news.excerpt_en or \"\"},\n        \"content\": {\"vi\": news.content_vi or \"\", \"en\": news.content_en or \"\"},\n        \"image\": news.image_url or \"\",\n        \"date\": news.published_at.strftime(\"%Y-%m-%d\") if news.published_at else \"\",\n        \"category\": {\"vi\": get_category_label(news.category, \"vi\"), \"en\": get_category_label(news.category, \"en\")}\n    }\n\ndef get_category_label(category, lang):\n    labels = {\n        \"news\": {\"vi\": \"Tin tức\", \"en\": \"News\"},\n        \"promotion\": {\"vi\": \"Ưu đãi\", \"en\": \"Promotion\"},\n        \"event\": {\"vi\": \"Sự kiện\", \"en\": \"Event\"}\n    }\n    return labels.get(category, {}).get(lang, category or \"\")\n\n@app.route('/')\ndef home():\n    lang = request.args.get('lang', 'vi')\n    rooms = Room.query.filter_by(is_active=True, is_featured=True).all()\n    rooms_data = {r.slug: room_to_dict(r) for r in rooms}\n    \n    amenities = Amenity.query.filter_by(is_active=True).all()\n    amenities_data = {a.slug: amenity_to_dict(a) for a in amenities}\n    \n    news_items = News.query.filter_by(status='published').order_by(News.published_at.desc()).limit(3).all()\n    news_data = [news_to_dict(n) for n in news_items]\n    \n    banners = Banner.query.filter_by(is_active=True).order_by(Banner.sort_order, Banner.created_at).all()\n    \n    return render_template('home.html', \n                         lang=lang,\n                         rooms=rooms_data,\n                         amenities=amenities_data,\n                         news=news_data,\n                         banners=banners)\n\n@app.route('/accommodation')\ndef accommodation():\n    lang = request.args.get('lang', 'vi')\n    room_type = request.args.get('type', None)\n    \n    query = Room.query.filter_by(is_active=True)\n    if room_type:\n        query = query.filter_by(room_type=room_type)\n    rooms = query.all()\n    rooms_data = {r.slug: room_to_dict(r) for r in rooms}\n    \n    return render_template('accommodation.html', \n                         lang=lang,\n                         rooms=rooms_data,\n                         selected_type=room_type)\n\n@app.route('/accommodation/<room_id>')\ndef room_detail(room_id):\n    lang = request.args.get('lang', 'vi')\n    room = Room.query.filter_by(slug=room_id, is_active=True).first()\n    if not room:\n        return render_template('404.html', lang=lang), 404\n    return render_template('room_detail.html', lang=lang, room=room_to_dict(room))\n\n@app.route('/dining')\ndef dining():\n    lang = request.args.get('lang', 'vi')\n    restaurants = Restaurant.query.filter_by(is_active=True).all()\n    restaurants_data = {r.slug: restaurant_to_dict(r) for r in restaurants}\n    return render_template('dining.html', lang=lang, restaurants=restaurants_data)\n\n@app.route('/dining/<restaurant_id>')\ndef restaurant_detail(restaurant_id):\n    lang = request.args.get('lang', 'vi')\n    restaurant = Restaurant.query.filter_by(slug=restaurant_id, is_active=True).first()\n    if not restaurant:\n        return render_template('404.html', lang=lang), 404\n    return render_template('restaurant_detail.html', lang=lang, restaurant=restaurant_to_dict(restaurant))\n\n@app.route('/amenities')\ndef amenities():\n    lang = request.args.get('lang', 'vi')\n    amenities_list = Amenity.query.filter_by(is_active=True).all()\n    amenities_data = {a.slug: amenity_to_dict(a) for a in amenities_list}\n    return render_template('amenities.html', lang=lang, amenities=amenities_data)\n\n@app.route('/experiences/checkin')\ndef experience_checkin():\n    lang = request.args.get('lang', 'vi')\n    experience = Experience.query.filter_by(slug='checkin', is_active=True).first()\n    if not experience:\n        return render_template('404.html', lang=lang), 404\n    return render_template('experience_detail.html', lang=lang, experience=experience_to_dict(experience))\n\n@app.route('/experiences/adventure')\ndef experience_adventure():\n    lang = request.args.get('lang', 'vi')\n    experience = Experience.query.filter_by(slug='adventure', is_active=True).first()\n    if not experience:\n        return render_template('404.html', lang=lang), 404\n    return render_template('experience_detail.html', lang=lang, experience=experience_to_dict(experience))\n\n@app.route('/steam/intro')\ndef steam_intro():\n    lang = request.args.get('lang', 'vi')\n    steam_item = SteamProgram.query.filter_by(slug='intro', is_active=True).first()\n    if not steam_item:\n        return render_template('404.html', lang=lang), 404\n    return render_template('steam_detail.html', lang=lang, steam=steam_to_dict(steam_item))\n\n@app.route('/steam/workshop')\ndef steam_workshop():\n    lang = request.args.get('lang', 'vi')\n    steam_item = SteamProgram.query.filter_by(slug='workshop', is_active=True).first()\n    if not steam_item:\n        return render_template('404.html', lang=lang), 404\n    return render_template('steam_detail.html', lang=lang, steam=steam_to_dict(steam_item))\n\n@app.route('/steam/register')\ndef steam_register():\n    lang = request.args.get('lang', 'vi')\n    return render_template('steam_register.html', lang=lang)\n\n@app.route('/events')\ndef events():\n    lang = request.args.get('lang', 'vi')\n    events_list = Event.query.filter_by(is_active=True).all()\n    events_data = {e.slug: event_to_dict(e) for e in events_list}\n    return render_template('events.html', lang=lang, events=events_data)\n\n@app.route('/news')\ndef news():\n    lang = request.args.get('lang', 'vi')\n    news_items = News.query.filter_by(status='published').order_by(News.published_at.desc()).all()\n    news_data = [news_to_dict(n) for n in news_items]\n    return render_template('news.html', lang=lang, news=news_data)\n\n@app.route('/news/<int:news_id>')\ndef news_detail(news_id):\n    lang = request.args.get('lang', 'vi')\n    article = News.query.filter_by(id=news_id, status='published').first()\n    if not article:\n        return render_template('404.html', lang=lang), 404\n    return render_template('news_detail.html', lang=lang, article=news_to_dict(article))\n\n@app.route('/gallery')\ndef gallery():\n    lang = request.args.get('lang', 'vi')\n    \n    images = GalleryItem.query.filter_by(type='image', is_active=True).order_by(GalleryItem.sort_order).all()\n    videos = GalleryItem.query.filter_by(type='video', is_active=True).order_by(GalleryItem.sort_order).all()\n    \n    gallery_data = {\n        \"images\": [\n            {\"url\": img.url, \"title\": {\"vi\": img.title_vi or \"\", \"en\": img.title_en or \"\"}}\n            for img in images\n        ],\n        \"videos\": [\n            {\"url\": vid.url, \"title\": {\"vi\": vid.title_vi or \"\", \"en\": vid.title_en or \"\"}}\n            for vid in videos\n        ]\n    }\n    \n    return render_template('gallery.html', lang=lang, gallery=gallery_data)\n\n@app.route('/contact')\ndef contact():\n    lang = request.args.get('lang', 'vi')\n    return render_template('contact.html', lang=lang)\n\n@app.route('/api/contact', methods=['POST'])\n@csrf.exempt\ndef submit_contact():\n    data = request.get_json()\n    try:\n        contact = Contact(\n            name=data.get('name') or data.get('parent_name', ''),\n            email=data.get('email', ''),\n            phone=data.get('phone', ''),\n            subject=data.get('subject') or data.get('program', ''),\n            message=str(data),\n            contact_type=data.get('type', 'contact'),\n            status='new'\n        )\n        db.session.add(contact)\n        db.session.commit()\n    except Exception as e:\n        print(f\"Error saving contact: {e}\")\n    return jsonify({\"success\": True, \"message\": \"Cảm ơn bạn đã liên hệ! Chúng tôi sẽ phản hồi sớm nhất.\"})\n\n@app.route('/api/booking', methods=['POST'])\n@csrf.exempt\ndef submit_booking():\n    data = request.get_json()\n    try:\n        contact = Contact(\n            name=data.get('name', ''),\n            email=data.get('email', ''),\n            phone=data.get('phone', ''),\n            subject='Đặt phòng',\n            message=str(data),\n            contact_type='booking',\n            status='new'\n        )\n        db.session.add(contact)\n        db.session.commit()\n    except Exception as e:\n        print(f\"Error saving booking: {e}\")\n    return jsonify({\"success\": True, \"message\": \"Yêu cầu đặt phòng đã được gửi! Chúng tôi sẽ liên hệ xác nhận.\"})\n\n@app.errorhandler(413)\ndef request_entity_too_large(error):\n    from flask import flash\n    flash('File quá lớn! Vui lòng chọn file nhỏ hơn 25MB.', 'error')\n    return render_template('error.html', error_code=413, error_message='File quá lớn! Vui lòng chọn file nhỏ hơn 25MB.'), 413\n\nif __name__ == '__main__':\n    create_admin_user()\n    app.run(host='0.0.0.0', port=5000, debug=True)\n","path":null,"size_bytes":14143,"size_tokens":null},"seed_data.py":{"content":"import os\nfrom datetime import datetime\nfrom app import app\nfrom models import db, Room, RoomImage, Restaurant, RestaurantImage, MenuItem, Amenity, AmenityImage, Experience, ExperienceImage, ExperienceVideo, SteamProgram, SteamImage, SteamVideo, Event, EventImage, News, GalleryItem\n\ndef seed_rooms():\n    rooms_data = [\n        {\n            \"slug\": \"deluxe\",\n            \"name_vi\": \"Phòng Tiêu Chuẩn / Deluxe\",\n            \"name_en\": \"Standard / Deluxe Room\",\n            \"description_vi\": \"Phòng tiêu chuẩn với đầy đủ tiện nghi hiện đại, view đẹp ra khu vườn hoặc hồ bơi.\",\n            \"description_en\": \"Standard room with modern amenities, beautiful garden or pool view.\",\n            \"price\": 1500000,\n            \"area\": 35,\n            \"capacity\": 2,\n            \"room_type\": \"deluxe\",\n            \"amenities\": \"WiFi miễn phí\\nĐiều hòa\\nTV màn hình phẳng\\nMinibar\\nPhòng tắm riêng\",\n            \"video_url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\",\n            \"is_featured\": True,\n            \"images\": [\n                \"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=800\",\n                \"https://images.unsplash.com/photo-1611892440504-42a792e24d32?w=800\"\n            ]\n        },\n        {\n            \"slug\": \"glamping\",\n            \"name_vi\": \"Glamping / Cabin / Homestay\",\n            \"name_en\": \"Glamping / Cabin / Homestay\",\n            \"description_vi\": \"Trải nghiệm cắm trại sang trọng giữa thiên nhiên với đầy đủ tiện nghi.\",\n            \"description_en\": \"Luxury camping experience in nature with full amenities.\",\n            \"price\": 2000000,\n            \"area\": 40,\n            \"capacity\": 4,\n            \"room_type\": \"glamping\",\n            \"amenities\": \"WiFi miễn phí\\nĐiều hòa\\nKhông gian ngoài trời\\nKhu BBQ riêng\\nPhòng tắm riêng\",\n            \"video_url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\",\n            \"is_featured\": True,\n            \"images\": [\n                \"https://images.unsplash.com/photo-1499696010180-025ef6e1a8f9?w=800\",\n                \"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=800\"\n            ]\n        },\n        {\n            \"slug\": \"bungalow\",\n            \"name_vi\": \"Dorm / Bungalow\",\n            \"name_en\": \"Dorm / Bungalow\",\n            \"description_vi\": \"Bungalow riêng biệt giữa khu vườn nhiệt đới, không gian yên tĩnh và riêng tư.\",\n            \"description_en\": \"Private bungalow in tropical garden, peaceful and private space.\",\n            \"price\": 2500000,\n            \"area\": 50,\n            \"capacity\": 4,\n            \"room_type\": \"bungalow\",\n            \"amenities\": \"WiFi miễn phí\\nĐiều hòa\\nBếp nhỏ\\nSân vườn riêng\\nPhòng tắm riêng\",\n            \"video_url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\",\n            \"is_featured\": True,\n            \"images\": [\n                \"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=800\",\n                \"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800\"\n            ]\n        }\n    ]\n    \n    for room_data in rooms_data:\n        existing = Room.query.filter_by(slug=room_data['slug']).first()\n        if existing:\n            continue\n            \n        images = room_data.pop('images')\n        room = Room(**room_data)\n        db.session.add(room)\n        db.session.flush()\n        \n        for i, img_url in enumerate(images):\n            img = RoomImage(room_id=room.id, url=img_url, sort_order=i)\n            db.session.add(img)\n    \n    db.session.commit()\n    print(\"Seeded rooms\")\n\ndef seed_restaurants():\n    restaurants_data = [\n        {\n            \"slug\": \"restaurant1\",\n            \"name_vi\": \"Nhà Hàng Lumora\",\n            \"name_en\": \"Lumora Restaurant\",\n            \"description_vi\": \"Nhà hàng chính phục vụ ẩm thực Việt Nam và quốc tế với không gian sang trọng.\",\n            \"description_en\": \"Main restaurant serving Vietnamese and international cuisine in elegant setting.\",\n            \"category_vi\": \"Nhà hàng\",\n            \"category_en\": \"Restaurant\",\n            \"hours\": \"06:00 - 22:00\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800\",\n                \"https://images.unsplash.com/photo-1552566626-52f8b828add9?w=800\"\n            ],\n            \"menu\": [\n                {\"name_vi\": \"Phở Bò\", \"name_en\": \"Beef Pho\", \"price\": 85000},\n                {\"name_vi\": \"Bún Chả\", \"name_en\": \"Bun Cha\", \"price\": 75000},\n                {\"name_vi\": \"Cơm Tấm\", \"name_en\": \"Broken Rice\", \"price\": 70000}\n            ]\n        },\n        {\n            \"slug\": \"restaurant2\",\n            \"name_vi\": \"BBQ Garden\",\n            \"name_en\": \"BBQ Garden\",\n            \"description_vi\": \"Khu BBQ ngoài trời với không gian xanh mát, thích hợp cho nhóm bạn và gia đình.\",\n            \"description_en\": \"Outdoor BBQ area with green space, perfect for groups and families.\",\n            \"category_vi\": \"BBQ\",\n            \"category_en\": \"BBQ\",\n            \"hours\": \"17:00 - 23:00\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800\",\n                \"https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=800\"\n            ],\n            \"menu\": [\n                {\"name_vi\": \"Set BBQ Hải Sản\", \"name_en\": \"Seafood BBQ Set\", \"price\": 450000},\n                {\"name_vi\": \"Set BBQ Bò Wagyu\", \"name_en\": \"Wagyu Beef BBQ Set\", \"price\": 650000},\n                {\"name_vi\": \"Set BBQ Gia Đình\", \"name_en\": \"Family BBQ Set\", \"price\": 850000}\n            ]\n        },\n        {\n            \"slug\": \"cafe\",\n            \"name_vi\": \"Café & Bar Lounge\",\n            \"name_en\": \"Café & Bar Lounge\",\n            \"description_vi\": \"Quán café và bar với view đẹp, phục vụ đồ uống và cocktail đặc biệt.\",\n            \"description_en\": \"Café and bar with beautiful view, serving drinks and special cocktails.\",\n            \"category_vi\": \"Café / Bar\",\n            \"category_en\": \"Café / Bar\",\n            \"hours\": \"07:00 - 24:00\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800\",\n                \"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=800\"\n            ],\n            \"menu\": [\n                {\"name_vi\": \"Cà Phê Sữa Đá\", \"name_en\": \"Vietnamese Iced Coffee\", \"price\": 45000},\n                {\"name_vi\": \"Mojito\", \"name_en\": \"Mojito\", \"price\": 120000},\n                {\"name_vi\": \"Smoothie Trái Cây\", \"name_en\": \"Fruit Smoothie\", \"price\": 65000}\n            ]\n        }\n    ]\n    \n    for rest_data in restaurants_data:\n        existing = Restaurant.query.filter_by(slug=rest_data['slug']).first()\n        if existing:\n            continue\n            \n        images = rest_data.pop('images')\n        menu = rest_data.pop('menu')\n        restaurant = Restaurant(**rest_data)\n        db.session.add(restaurant)\n        db.session.flush()\n        \n        for i, img_url in enumerate(images):\n            img = RestaurantImage(restaurant_id=restaurant.id, url=img_url, sort_order=i)\n            db.session.add(img)\n        \n        for i, item in enumerate(menu):\n            menu_item = MenuItem(restaurant_id=restaurant.id, sort_order=i, **item)\n            db.session.add(menu_item)\n    \n    db.session.commit()\n    print(\"Seeded restaurants\")\n\ndef seed_amenities():\n    amenities_data = [\n        {\n            \"slug\": \"zoo\",\n            \"name_vi\": \"Vườn Thú Mini\",\n            \"name_en\": \"Mini Zoo\",\n            \"description_vi\": \"Vườn thú mini với nhiều loài động vật dễ thương, thích hợp cho trẻ em khám phá.\",\n            \"description_en\": \"Mini zoo with cute animals, perfect for children to explore.\",\n            \"icon\": \"paw\",\n            \"video_url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\",\n            \"images\": [\"https://images.unsplash.com/photo-1534567153574-2b12153a87f0?w=800\"]\n        },\n        {\n            \"slug\": \"garden\",\n            \"name_vi\": \"Vườn Cây Xanh\",\n            \"name_en\": \"Green Garden\",\n            \"description_vi\": \"Khu vườn nhiệt đới với đa dạng cây xanh, không gian thư giãn lý tưởng.\",\n            \"description_en\": \"Tropical garden with diverse plants, ideal relaxation space.\",\n            \"icon\": \"leaf\",\n            \"video_url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\",\n            \"images\": [\"https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=800\"]\n        },\n        {\n            \"slug\": \"pool\",\n            \"name_vi\": \"Bể Bơi Vô Cực\",\n            \"name_en\": \"Infinity Pool\",\n            \"description_vi\": \"Bể bơi vô cực với tầm nhìn tuyệt đẹp, mở cửa từ 6h sáng đến 10h tối.\",\n            \"description_en\": \"Infinity pool with stunning views, open from 6am to 10pm.\",\n            \"icon\": \"swimming-pool\",\n            \"video_url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\",\n            \"images\": [\"https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=800\"]\n        }\n    ]\n    \n    for amenity_data in amenities_data:\n        existing = Amenity.query.filter_by(slug=amenity_data['slug']).first()\n        if existing:\n            continue\n            \n        images = amenity_data.pop('images')\n        amenity = Amenity(**amenity_data)\n        db.session.add(amenity)\n        db.session.flush()\n        \n        for i, img_url in enumerate(images):\n            img = AmenityImage(amenity_id=amenity.id, url=img_url, sort_order=i)\n            db.session.add(img)\n    \n    db.session.commit()\n    print(\"Seeded amenities\")\n\ndef seed_experiences():\n    experiences_data = [\n        {\n            \"slug\": \"checkin\",\n            \"title_vi\": \"Tham Quan Check-in\",\n            \"title_en\": \"Check-in Tour\",\n            \"short_desc_vi\": \"Khám phá những điểm check-in đẹp nhất tại Lumora Resort.\",\n            \"short_desc_en\": \"Discover the most beautiful check-in spots at Lumora Resort.\",\n            \"content_vi\": \"\"\"<p>Lumora Resort tự hào sở hữu hàng chục điểm check-in tuyệt đẹp, mỗi góc nhỏ đều là một khung cảnh hoàn hảo cho những bức ảnh đáng nhớ của bạn.</p>\n                \n<h3>Các Điểm Check-in Nổi Bật</h3>\n\n<h4>1. Cầu Gỗ Giữa Hồ Sen</h4>\n<p>Cây cầu gỗ uốn lượn giữa hồ sen rộng lớn, với những bông sen hồng nở rộ vào mùa hè. Đây là điểm check-in được yêu thích nhất với ánh sáng hoàng hôn tuyệt đẹp.</p>\n\n<h4>2. Vườn Hoa Bốn Mùa</h4>\n<p>Khu vườn với hàng nghìn loài hoa từ khắp nơi trên thế giới, thay đổi theo từng mùa.</p>\n\n<h4>3. Khu Rừng Tre Xanh</h4>\n<p>Con đường nhỏ xuyên qua rừng tre xanh mát, tạo nên không gian yên bình và những bức ảnh mang phong cách Nhật Bản độc đáo.</p>\n\n<h4>4. Bể Bơi Vô Cực</h4>\n<p>Bể bơi vô cực nhìn ra núi đồi xa xa, đặc biệt đẹp vào lúc bình minh và hoàng hôn.</p>\n\n<h3>Lịch Trình Tour Tham Quan</h3>\n<ul>\n    <li><strong>Tour Sáng (7:00 - 9:00):</strong> Bắt đầu từ khu vườn hoa, hồ sen, rừng tre</li>\n    <li><strong>Tour Chiều (15:00 - 17:00):</strong> Khu nhà sàn, bể bơi vô cực, đồi cỏ</li>\n    <li><strong>Tour Hoàng Hôn (17:00 - 19:00):</strong> Các điểm view hoàng hôn đẹp nhất</li>\n</ul>\n\n<h3>Dịch Vụ Chụp Ảnh Chuyên Nghiệp</h3>\n<p>Lumora Resort cung cấp dịch vụ nhiếp ảnh chuyên nghiệp với photographer có kinh nghiệm. Liên hệ lễ tân để đặt lịch.</p>\"\"\",\n            \"content_en\": \"\"\"<p>Lumora Resort proudly features dozens of stunning check-in spots, where every corner is a perfect frame for your memorable photos.</p>\n\n<h3>Featured Check-in Spots</h3>\n\n<h4>1. Wooden Bridge Over Lotus Lake</h4>\n<p>A winding wooden bridge across the vast lotus lake, with pink lotus blooming in summer. This is the most beloved check-in spot with beautiful sunset lighting.</p>\n\n<h4>2. Four Seasons Flower Garden</h4>\n<p>A garden with thousands of flower species from around the world, changing with each season.</p>\n\n<h4>3. Green Bamboo Forest</h4>\n<p>A small path through the cool green bamboo forest, creating a peaceful atmosphere and unique Japanese-style photos.</p>\n\n<h4>4. Infinity Pool</h4>\n<p>The infinity pool overlooking distant hills, especially beautiful at sunrise and sunset.</p>\n\n<h3>Tour Schedule</h3>\n<ul>\n    <li><strong>Morning Tour (7:00 - 9:00):</strong> Starting from flower garden, lotus lake, bamboo forest</li>\n    <li><strong>Afternoon Tour (15:00 - 17:00):</strong> Stilt houses, infinity pool, grass hills</li>\n    <li><strong>Sunset Tour (17:00 - 19:00):</strong> Best sunset viewing spots</li>\n</ul>\n\n<h3>Professional Photography Service</h3>\n<p>Lumora Resort provides professional photography services. Contact reception to book.</p>\"\"\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800\",\n                \"https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=800\",\n                \"https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800\",\n                \"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800\"\n            ],\n            \"videos\": [\n                {\"url\": \"https://www.youtube.com/embed/LXb3EKWsInQ\", \"title_vi\": \"Tour Tham Quan Resort\", \"title_en\": \"Resort Tour\"},\n                {\"url\": \"https://www.youtube.com/embed/5qap5aO4i9A\", \"title_vi\": \"Điểm Check-in Đẹp Nhất\", \"title_en\": \"Best Check-in Spots\"}\n            ]\n        },\n        {\n            \"slug\": \"adventure\",\n            \"title_vi\": \"Khu Trò Chơi Mạo Hiểm\",\n            \"title_en\": \"Adventure Playground\",\n            \"short_desc_vi\": \"Thử thách bản thân với các hoạt động mạo hiểm đầy thú vị.\",\n            \"short_desc_en\": \"Challenge yourself with exciting adventure activities.\",\n            \"content_vi\": \"\"\"<p>Khu Trò Chơi Mạo Hiểm tại Lumora Resort là điểm đến lý tưởng cho những ai yêu thích cảm giác mạnh.</p>\n\n<h3>Các Hoạt Động Mạo Hiểm</h3>\n\n<h4>1. Zipline Xuyên Rừng</h4>\n<p>Bay lượn trên dây zipline dài 500m xuyên qua tán rừng xanh mát, với độ cao 50m so với mặt đất.</p>\n<p><strong>Độ tuổi:</strong> Từ 10 tuổi | <strong>Thời gian:</strong> 15-20 phút</p>\n\n<h4>2. Leo Vách Đá</h4>\n<p>Khu vực leo núi nhân tạo với 5 cấp độ từ dễ đến khó.</p>\n<p><strong>Độ tuổi:</strong> Từ 8 tuổi | <strong>Thời gian:</strong> 30-45 phút</p>\n\n<h4>3. Cầu Treo Vượt Thác</h4>\n<p>Đi qua cầu treo bằng gỗ dài 100m bắc qua thác nước.</p>\n<p><strong>Độ tuổi:</strong> Từ 6 tuổi | <strong>Thời gian:</strong> 10-15 phút</p>\n\n<h3>Gói Trải Nghiệm</h3>\n<ul>\n    <li><strong>Gói Cơ Bản:</strong> 2 hoạt động tự chọn - 300.000đ/người</li>\n    <li><strong>Gói Tiêu Chuẩn:</strong> 4 hoạt động - 500.000đ/người</li>\n    <li><strong>Gói VIP:</strong> Tất cả hoạt động + ảnh kỷ niệm - 800.000đ/người</li>\n</ul>\"\"\",\n            \"content_en\": \"\"\"<p>The Adventure Playground at Lumora Resort is the ideal destination for thrill-seekers.</p>\n\n<h3>Adventure Activities</h3>\n\n<h4>1. Forest Zipline</h4>\n<p>Soar on a 500m zipline through the cool green canopy, 50m above ground.</p>\n<p><strong>Age:</strong> From 10 years | <strong>Duration:</strong> 15-20 minutes</p>\n\n<h4>2. Rock Climbing</h4>\n<p>Artificial climbing area with 5 difficulty levels from easy to hard.</p>\n<p><strong>Age:</strong> From 8 years | <strong>Duration:</strong> 30-45 minutes</p>\n\n<h4>3. Waterfall Suspension Bridge</h4>\n<p>Cross a 100m wooden suspension bridge over a waterfall.</p>\n<p><strong>Age:</strong> From 6 years | <strong>Duration:</strong> 10-15 minutes</p>\n\n<h3>Experience Packages</h3>\n<ul>\n    <li><strong>Basic Package:</strong> 2 activities of choice - 300,000 VND/person</li>\n    <li><strong>Standard Package:</strong> 4 activities - 500,000 VND/person</li>\n    <li><strong>VIP Package:</strong> All activities + souvenir photos - 800,000 VND/person</li>\n</ul>\"\"\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800\",\n                \"https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?w=800\",\n                \"https://images.unsplash.com/photo-1519904981063-b0cf448d479e?w=800\",\n                \"https://images.unsplash.com/photo-1517649763962-0c623066013b?w=800\"\n            ],\n            \"videos\": [\n                {\"url\": \"https://www.youtube.com/embed/LXb3EKWsInQ\", \"title_vi\": \"Khu Trò Chơi Mạo Hiểm\", \"title_en\": \"Adventure Playground\"},\n                {\"url\": \"https://www.youtube.com/embed/5qap5aO4i9A\", \"title_vi\": \"Zipline Xuyên Rừng\", \"title_en\": \"Forest Zipline\"}\n            ]\n        }\n    ]\n    \n    for exp_data in experiences_data:\n        existing = Experience.query.filter_by(slug=exp_data['slug']).first()\n        if existing:\n            continue\n            \n        images = exp_data.pop('images')\n        videos = exp_data.pop('videos')\n        experience = Experience(**exp_data)\n        db.session.add(experience)\n        db.session.flush()\n        \n        for i, img_url in enumerate(images):\n            img = ExperienceImage(experience_id=experience.id, url=img_url, sort_order=i)\n            db.session.add(img)\n        \n        for i, video in enumerate(videos):\n            vid = ExperienceVideo(experience_id=experience.id, sort_order=i, **video)\n            db.session.add(vid)\n    \n    db.session.commit()\n    print(\"Seeded experiences\")\n\ndef seed_steam():\n    steam_data = [\n        {\n            \"slug\": \"intro\",\n            \"title_vi\": \"Giới Thiệu Chương Trình STEAM\",\n            \"title_en\": \"STEAM Program Introduction\",\n            \"short_desc_vi\": \"Khám phá chương trình giáo dục STEAM độc đáo tại Lumora Resort.\",\n            \"short_desc_en\": \"Discover the unique STEAM education program at Lumora Resort.\",\n            \"content_vi\": \"\"\"<p>Chương trình Giáo dục STEAM tại Lumora Resort được thiết kế đặc biệt để mang đến cho trẻ em những trải nghiệm học tập thú vị.</p>\n\n<h3>STEAM Là Gì?</h3>\n<p>STEAM là phương pháp giáo dục tích hợp 5 lĩnh vực:</p>\n<ul>\n    <li><strong>S - Science (Khoa học):</strong> Khám phá các hiện tượng tự nhiên</li>\n    <li><strong>T - Technology (Công nghệ):</strong> Ứng dụng công nghệ vào học tập</li>\n    <li><strong>E - Engineering (Kỹ thuật):</strong> Thiết kế và xây dựng</li>\n    <li><strong>A - Arts (Nghệ thuật):</strong> Phát triển tư duy sáng tạo</li>\n    <li><strong>M - Mathematics (Toán học):</strong> Tư duy logic</li>\n</ul>\n\n<h3>Các Chương Trình Nổi Bật</h3>\n<ul>\n    <li><strong>STEAM Camp (3-5 ngày):</strong> Trại hè STEAM với nhiều hoạt động đa dạng</li>\n    <li><strong>STEAM Weekend (2 ngày):</strong> Cuối tuần khám phá khoa học</li>\n    <li><strong>STEAM Day Trip (1 ngày):</strong> Một ngày trải nghiệm STEAM</li>\n</ul>\n\n<h3>Đối Tượng Tham Gia</h3>\n<ul>\n    <li>Trẻ em từ 6-15 tuổi</li>\n    <li>Các nhóm học sinh từ trường học</li>\n    <li>Gia đình muốn trải nghiệm cùng con</li>\n</ul>\"\"\",\n            \"content_en\": \"\"\"<p>The STEAM Education Program at Lumora Resort is specially designed to provide children with exciting learning experiences.</p>\n\n<h3>What is STEAM?</h3>\n<p>STEAM is an integrated educational approach covering 5 areas:</p>\n<ul>\n    <li><strong>S - Science:</strong> Exploring natural phenomena</li>\n    <li><strong>T - Technology:</strong> Applying technology to learning</li>\n    <li><strong>E - Engineering:</strong> Design and building</li>\n    <li><strong>A - Arts:</strong> Developing creative thinking</li>\n    <li><strong>M - Mathematics:</strong> Logical thinking</li>\n</ul>\n\n<h3>Featured Programs</h3>\n<ul>\n    <li><strong>STEAM Camp (3-5 days):</strong> Summer STEAM camp with diverse activities</li>\n    <li><strong>STEAM Weekend (2 days):</strong> Science discovery weekend</li>\n    <li><strong>STEAM Day Trip (1 day):</strong> One day STEAM experience</li>\n</ul>\n\n<h3>Participants</h3>\n<ul>\n    <li>Children aged 6-15</li>\n    <li>Student groups from schools</li>\n    <li>Families wanting to experience with their children</li>\n</ul>\"\"\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=800\",\n                \"https://images.unsplash.com/photo-1567057419565-4349c49d8a04?w=800\",\n                \"https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800\"\n            ],\n            \"videos\": [\n                {\"url\": \"https://www.youtube.com/embed/UYqnDxvdMPg\", \"title_vi\": \"Giới Thiệu STEAM\", \"title_en\": \"STEAM Introduction\"},\n                {\"url\": \"https://www.youtube.com/embed/LXb3EKWsInQ\", \"title_vi\": \"STEAM Camp Tại Lumora\", \"title_en\": \"STEAM Camp at Lumora\"}\n            ]\n        },\n        {\n            \"slug\": \"workshop\",\n            \"title_vi\": \"Workshop Kỹ Năng\",\n            \"title_en\": \"Skills Workshop\",\n            \"short_desc_vi\": \"Các workshop kỹ năng thực hành cho trẻ em và người lớn.\",\n            \"short_desc_en\": \"Practical skill workshops for children and adults.\",\n            \"content_vi\": \"\"\"<p>Workshop Kỹ Năng tại Lumora Resort mang đến những buổi học thực hành bổ ích.</p>\n\n<h3>Các Workshop Đang Tổ Chức</h3>\n\n<h4>1. Workshop Làm Robot</h4>\n<p>Học cách lắp ráp và lập trình robot đơn giản.</p>\n<p><strong>Thời lượng:</strong> 3 tiếng | <strong>Độ tuổi:</strong> 8-15 tuổi | <strong>Học phí:</strong> 350.000đ</p>\n\n<h4>2. Workshop Thí Nghiệm Khoa Học</h4>\n<p>Thực hiện các thí nghiệm khoa học thú vị với nguyên liệu an toàn.</p>\n<p><strong>Thời lượng:</strong> 2 tiếng | <strong>Độ tuổi:</strong> 6-12 tuổi | <strong>Học phí:</strong> 250.000đ</p>\n\n<h4>3. Workshop Nghệ Thuật Tái Chế</h4>\n<p>Sáng tạo các sản phẩm nghệ thuật từ vật liệu tái chế.</p>\n<p><strong>Thời lượng:</strong> 2.5 tiếng | <strong>Độ tuổi:</strong> Mọi lứa tuổi | <strong>Học phí:</strong> 200.000đ</p>\n\n<h3>Lịch Workshop Hàng Tuần</h3>\n<ul>\n    <li><strong>Thứ 7:</strong> Workshop Làm Robot (9:00-12:00), Workshop Nghệ Thuật (14:00-16:30)</li>\n    <li><strong>Chủ Nhật:</strong> Workshop Khoa Học (9:00-11:00), Workshop Làm Vườn (14:00-16:00)</li>\n</ul>\n\n<h3>Ưu Đãi Nhóm</h3>\n<p>Giảm 10% cho nhóm từ 5 người, giảm 20% cho nhóm từ 10 người trở lên.</p>\"\"\",\n            \"content_en\": \"\"\"<p>Skills Workshops at Lumora Resort offer practical learning sessions.</p>\n\n<h3>Current Workshops</h3>\n\n<h4>1. Robot Building Workshop</h4>\n<p>Learn to assemble and program simple robots.</p>\n<p><strong>Duration:</strong> 3 hours | <strong>Age:</strong> 8-15 years | <strong>Fee:</strong> 350,000 VND</p>\n\n<h4>2. Science Experiment Workshop</h4>\n<p>Conduct fun science experiments with safe materials.</p>\n<p><strong>Duration:</strong> 2 hours | <strong>Age:</strong> 6-12 years | <strong>Fee:</strong> 250,000 VND</p>\n\n<h4>3. Recycled Art Workshop</h4>\n<p>Create art products from recycled materials.</p>\n<p><strong>Duration:</strong> 2.5 hours | <strong>Age:</strong> All ages | <strong>Fee:</strong> 200,000 VND</p>\n\n<h3>Weekly Workshop Schedule</h3>\n<ul>\n    <li><strong>Saturday:</strong> Robot Workshop (9:00-12:00), Art Workshop (14:00-16:30)</li>\n    <li><strong>Sunday:</strong> Science Workshop (9:00-11:00), Gardening Workshop (14:00-16:00)</li>\n</ul>\n\n<h3>Group Discounts</h3>\n<p>10% off for groups of 5+, 20% off for groups of 10+.</p>\"\"\",\n            \"images\": [\n                \"https://images.unsplash.com/photo-1544928147-79a2dbc1f389?w=800\",\n                \"https://images.unsplash.com/photo-1530653333484-d65f75e24f57?w=800\",\n                \"https://images.unsplash.com/photo-1509062522246-3755977927d7?w=800\"\n            ],\n            \"videos\": [\n                {\"url\": \"https://www.youtube.com/embed/UYqnDxvdMPg\", \"title_vi\": \"Workshop Làm Robot\", \"title_en\": \"Robot Workshop\"},\n                {\"url\": \"https://www.youtube.com/embed/5qap5aO4i9A\", \"title_vi\": \"Workshop Kỹ Năng Sinh Tồn\", \"title_en\": \"Survival Skills Workshop\"}\n            ]\n        },\n        {\n            \"slug\": \"register\",\n            \"title_vi\": \"Đăng Ký Tham Gia STEAM\",\n            \"title_en\": \"Register for STEAM\",\n            \"short_desc_vi\": \"Đăng ký tham gia các chương trình STEAM tại Lumora Resort.\",\n            \"short_desc_en\": \"Register for STEAM programs at Lumora Resort.\",\n            \"content_vi\": \"<p>Vui lòng điền form đăng ký để tham gia các chương trình STEAM.</p>\",\n            \"content_en\": \"<p>Please fill out the registration form to join STEAM programs.</p>\",\n            \"images\": [],\n            \"videos\": []\n        }\n    ]\n    \n    for steam_item in steam_data:\n        existing = SteamProgram.query.filter_by(slug=steam_item['slug']).first()\n        if existing:\n            continue\n            \n        images = steam_item.pop('images')\n        videos = steam_item.pop('videos')\n        program = SteamProgram(**steam_item)\n        db.session.add(program)\n        db.session.flush()\n        \n        for i, img_url in enumerate(images):\n            img = SteamImage(steam_id=program.id, url=img_url, sort_order=i)\n            db.session.add(img)\n        \n        for i, video in enumerate(videos):\n            vid = SteamVideo(steam_id=program.id, sort_order=i, **video)\n            db.session.add(vid)\n    \n    db.session.commit()\n    print(\"Seeded STEAM programs\")\n\ndef seed_events():\n    events_data = [\n        {\n            \"slug\": \"hall\",\n            \"title_vi\": \"Hội Trường\",\n            \"title_en\": \"Conference Hall\",\n            \"description_vi\": \"Hội trường lớn sức chứa 500 người, trang bị đầy đủ âm thanh ánh sáng cho sự kiện.\",\n            \"description_en\": \"Large conference hall with 500 capacity, fully equipped with sound and lighting.\",\n            \"capacity\": 500,\n            \"features\": \"Hệ thống âm thanh chuyên nghiệp\\nMàn hình LED lớn\\nĐiều hòa trung tâm\\nWiFi tốc độ cao\",\n            \"images\": [\"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800\"]\n        },\n        {\n            \"slug\": \"teambuilding\",\n            \"title_vi\": \"Sân Team Building\",\n            \"title_en\": \"Team Building Ground\",\n            \"description_vi\": \"Sân rộng cho hoạt động team building, gala dinner và các sự kiện ngoài trời.\",\n            \"description_en\": \"Large ground for team building activities, gala dinner and outdoor events.\",\n            \"capacity\": 1000,\n            \"features\": \"Sân cỏ rộng 2000m²\\nSân khấu di động\\nKhu vực lửa trại\\nTrang thiết bị team building\",\n            \"images\": [\"https://images.unsplash.com/photo-1511578314322-379afb476865?w=800\"]\n        }\n    ]\n    \n    for event_data in events_data:\n        existing = Event.query.filter_by(slug=event_data['slug']).first()\n        if existing:\n            continue\n            \n        images = event_data.pop('images')\n        event = Event(**event_data)\n        db.session.add(event)\n        db.session.flush()\n        \n        for i, img_url in enumerate(images):\n            img = EventImage(event_id=event.id, url=img_url, sort_order=i)\n            db.session.add(img)\n    \n    db.session.commit()\n    print(\"Seeded events\")\n\ndef seed_news():\n    news_data = [\n        {\n            \"slug\": \"summer-2024-offer\",\n            \"title_vi\": \"Ưu đãi mùa hè 2024 - Giảm 30%\",\n            \"title_en\": \"Summer 2024 Offer - 30% Off\",\n            \"excerpt_vi\": \"Đặt phòng ngay để nhận ưu đãi giảm 30% cho kỳ nghỉ mùa hè tại Lumora Resort.\",\n            \"excerpt_en\": \"Book now to get 30% off for your summer vacation at Lumora Resort.\",\n            \"content_vi\": \"Chương trình ưu đãi mùa hè 2024 với mức giảm lên đến 30% cho tất cả các loại phòng. Áp dụng từ 01/06 đến 31/08/2024.\",\n            \"content_en\": \"Summer 2024 promotion with up to 30% discount on all room types. Valid from June 1 to August 31, 2024.\",\n            \"image_url\": \"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=800\",\n            \"category\": \"promotion\",\n            \"status\": \"published\",\n            \"published_at\": datetime(2024, 5, 15)\n        },\n        {\n            \"slug\": \"bbq-garden-opening\",\n            \"title_vi\": \"Khai trương nhà hàng BBQ Garden\",\n            \"title_en\": \"BBQ Garden Grand Opening\",\n            \"excerpt_vi\": \"Lumora Resort chính thức khai trương nhà hàng BBQ Garden với thực đơn đặc biệt.\",\n            \"excerpt_en\": \"Lumora Resort officially opens BBQ Garden with special menu.\",\n            \"content_vi\": \"Nhà hàng BBQ Garden mới khai trương với không gian ngoài trời thoáng mát và thực đơn BBQ đa dạng.\",\n            \"content_en\": \"BBQ Garden newly opened with spacious outdoor area and diverse BBQ menu.\",\n            \"image_url\": \"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800\",\n            \"category\": \"news\",\n            \"status\": \"published\",\n            \"published_at\": datetime(2024, 4, 20)\n        },\n        {\n            \"slug\": \"steam-workshop-kids\",\n            \"title_vi\": \"Workshop STEAM cho trẻ em\",\n            \"title_en\": \"STEAM Workshop for Kids\",\n            \"excerpt_vi\": \"Tham gia workshop STEAM cuối tuần dành cho các bé từ 6-12 tuổi.\",\n            \"excerpt_en\": \"Join weekend STEAM workshop for kids aged 6-12.\",\n            \"content_vi\": \"Workshop STEAM với các hoạt động thú vị như lắp ráp robot, thí nghiệm khoa học và nghệ thuật sáng tạo.\",\n            \"content_en\": \"STEAM workshop with fun activities like robot assembly, science experiments and creative arts.\",\n            \"image_url\": \"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=800\",\n            \"category\": \"event\",\n            \"status\": \"published\",\n            \"published_at\": datetime(2024, 4, 10)\n        }\n    ]\n    \n    for news_item in news_data:\n        existing = News.query.filter_by(slug=news_item['slug']).first()\n        if existing:\n            continue\n            \n        news = News(**news_item)\n        db.session.add(news)\n    \n    db.session.commit()\n    print(\"Seeded news\")\n\ndef seed_gallery():\n    gallery_data = [\n        {\"type\": \"image\", \"title_vi\": \"Toàn cảnh Resort\", \"title_en\": \"Resort Overview\", \"url\": \"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800\", \"category\": \"resort\", \"sort_order\": 1},\n        {\"type\": \"image\", \"title_vi\": \"Bể bơi\", \"title_en\": \"Swimming Pool\", \"url\": \"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=800\", \"category\": \"resort\", \"sort_order\": 2},\n        {\"type\": \"image\", \"title_vi\": \"Phòng nghỉ\", \"title_en\": \"Room\", \"url\": \"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=800\", \"category\": \"room\", \"sort_order\": 3},\n        {\"type\": \"image\", \"title_vi\": \"Nhà hàng\", \"title_en\": \"Restaurant\", \"url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800\", \"category\": \"dining\", \"sort_order\": 4},\n        {\"type\": \"image\", \"title_vi\": \"Vườn cây\", \"title_en\": \"Garden\", \"url\": \"https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=800\", \"category\": \"resort\", \"sort_order\": 5},\n        {\"type\": \"image\", \"title_vi\": \"Cảnh đẹp\", \"title_en\": \"Scenery\", \"url\": \"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800\", \"category\": \"resort\", \"sort_order\": 6},\n        {\"type\": \"video\", \"title_vi\": \"Giới thiệu Resort\", \"title_en\": \"Resort Introduction\", \"url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\", \"category\": \"resort\", \"sort_order\": 7},\n        {\"type\": \"video\", \"title_vi\": \"Tour ảo\", \"title_en\": \"Virtual Tour\", \"url\": \"https://www.youtube.com/embed/dQw4w9WgXcQ\", \"category\": \"resort\", \"sort_order\": 8}\n    ]\n    \n    for item in gallery_data:\n        existing = GalleryItem.query.filter_by(url=item['url'], type=item['type']).first()\n        if existing:\n            continue\n            \n        gallery_item = GalleryItem(**item)\n        db.session.add(gallery_item)\n    \n    db.session.commit()\n    print(\"Seeded gallery\")\n\ndef seed_all():\n    with app.app_context():\n        db.create_all()\n        seed_rooms()\n        seed_restaurants()\n        seed_amenities()\n        seed_experiences()\n        seed_steam()\n        seed_events()\n        seed_news()\n        seed_gallery()\n        print(\"All data seeded successfully!\")\n\nif __name__ == '__main__':\n    seed_all()\n","path":null,"size_bytes":33053,"size_tokens":null},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":96,"size_tokens":null},"replit.md":{"content":"# Lumora Resort Website\n\n## Overview\nWebsite resort đa ngôn ngữ (Việt/Anh) cho Lumora Resort với đầy đủ các tính năng giới thiệu và đặt phòng. Bao gồm admin panel để quản lý nội dung.\n\n## Tech Stack\n- **Backend**: Python Flask, Flask-SQLAlchemy, Flask-Login, Flask-WTF\n- **Database**: PostgreSQL (Neon-backed)\n- **Frontend**: HTML5, TailwindCSS (CDN), JavaScript\n- **Template Engine**: Jinja2\n- **Fonts**: Google Fonts (Playfair Display, Open Sans)\n- **Icons**: Font Awesome\n\n## Project Structure\n```\n├── app.py                 # Main Flask application with routes and data\n├── models.py              # SQLAlchemy database models\n├── admin.py               # Admin blueprint with CRUD routes\n├── templates/\n│   ├── base.html          # Base template with header, footer, nav\n│   ├── home.html          # Homepage with hero, rooms preview, amenities\n│   ├── accommodation.html # Room listing page\n│   ├── room_detail.html   # Individual room details\n│   ├── dining.html        # Restaurant listing\n│   ├── restaurant_detail.html\n│   ├── amenities.html     # Amenities (pool, zoo, garden)\n│   ├── experiences.html   # Activities and experiences\n│   ├── steam.html         # STEAM education programs\n│   ├── events.html        # Event spaces\n│   ├── news.html          # News and promotions\n│   ├── news_detail.html\n│   ├── gallery.html       # Photo and video gallery\n│   ├── contact.html       # Contact form and booking\n│   ├── 404.html           # Error page\n│   └── admin/             # Admin panel templates\n│       ├── base.html      # Admin base layout\n│       ├── login.html     # Admin login page\n│       ├── dashboard.html # Admin dashboard\n│       ├── rooms/         # Room CRUD templates\n│       ├── restaurants/   # Restaurant CRUD templates\n│       ├── amenities/     # Amenity CRUD templates\n│       ├── experiences/   # Experience CRUD templates\n│       ├── steam/         # STEAM CRUD templates\n│       ├── events/        # Event CRUD templates\n│       ├── news/          # News CRUD templates\n│       ├── gallery/       # Gallery CRUD templates\n│       └── contacts/      # Contact view templates\n└── attached_assets/       # User uploaded files\n```\n\n## Features\n1. **Trang Chủ**: Hero banner, video YouTube, giới thiệu resort, phòng nổi bật, tiện ích\n2. **Lưu Trú**: Danh sách phòng (Deluxe, Glamping, Bungalow), filter theo loại, chi tiết phòng\n3. **Ẩm Thực**: 3 nhà hàng (Restaurant, BBQ Garden, Café & Bar), menu món ăn\n4. **Tiện Ích**: Vườn thú, vườn cây, bể bơi vô cực\n5. **Trải Nghiệm**: \n   - Tham Quan Check-in: Bài viết với hình ảnh và video\n   - Khu Trò Chơi Mạo Hiểm: Bài viết với hình ảnh và video\n6. **Giáo Dục STEAM** (Menu riêng):\n   - Giới Thiệu Chương Trình: Bài viết chi tiết về STEAM\n   - Workshop Kỹ Năng: Các workshop thực hành\n   - Đăng Ký Tham Gia: Form đăng ký với validation\n7. **Sự Kiện**: Hội trường, sân team building\n8. **Tin Tức**: Blog, ưu đãi, sự kiện\n9. **Thư Viện**: Gallery hình ảnh và video\n10. **Liên Hệ**: Form đặt phòng, form liên hệ, Google Maps\n\n## Admin Panel\n- **URL**: `/admin`\n- **Default credentials**: admin / admin123 (CHANGE IMMEDIATELY IN PRODUCTION)\n- **Features**:\n  - Dashboard với thống kê tổng quan\n  - Quản lý Phòng (thêm, sửa, xóa)\n  - Quản lý Nhà Hàng và Menu\n  - Quản lý Tiện Ích\n  - Quản lý Trải Nghiệm\n  - Quản lý Chương Trình STEAM\n  - Quản lý Sự Kiện\n  - Quản lý Tin Tức\n  - Quản lý Thư Viện Ảnh/Video\n  - Xem Liên Hệ từ khách hàng\n\n## Database Models\n- User: Tài khoản admin\n- Room, RoomImage: Phòng và hình ảnh phòng\n- Restaurant, MenuItem: Nhà hàng và menu\n- Amenity, AmenityImage: Tiện ích\n- Experience, ExperienceImage, ExperienceVideo: Trải nghiệm\n- SteamProgram, SteamProgramImage, SteamProgramVideo: Chương trình STEAM\n- Event, EventImage: Sự kiện\n- News: Tin tức\n- GalleryItem: Thư viện ảnh/video\n- Contact: Liên hệ từ khách\n\n## Đa Ngôn Ngữ\n- Hỗ trợ Tiếng Việt và Tiếng Anh\n- Chuyển đổi qua URL parameter `?lang=vi` hoặc `?lang=en`\n- Tất cả nội dung admin hỗ trợ nhập song ngữ\n\n## Responsive Design\n- Mobile-first với TailwindCSS\n- Breakpoints: sm (640px), md (768px), lg (1024px), xl (1280px)\n- Mobile menu với slide animation\n- Admin panel responsive\n\n## Running the App\n```bash\npython app.py\n```\nServer chạy trên port 5000.\n\n## Color Palette\n- Primary: #2D5A27 (xanh lá đậm)\n- Secondary: #8B7355 (nâu)\n- Accent: #D4AF37 (vàng gold)\n- Dark: #1A1A1A\n- Light: #F5F5F0\n\n## Security Notes\n- Default admin password should be changed immediately after first login\n- Session-based authentication with Flask-Login\n- CSRF protection enabled via Flask-WTF\n- Password hashing with Werkzeug\n\n## Data Management\n- Tất cả dữ liệu được lưu trong PostgreSQL database\n- Dữ liệu ban đầu được seed từ script `seed_data.py`\n- Admin có thể thêm/sửa/xóa tất cả nội dung qua admin panel\n- Hỗ trợ song ngữ (Việt/Anh) cho tất cả các trường nội dung\n\n## Recent Changes\n- 2024-12-03: Migrated all content to database, public routes now read from database\n- 2024-12-03: Added seed_data.py script for initial data population\n- 2024-12-03: Added admin panel with full CRUD for all content types\n- 2024-12-03: Integrated PostgreSQL database with SQLAlchemy ORM\n- 2024-12-03: Contact/Booking forms now save to database\n- 2024-12-02: Initial setup with all pages and features\n","path":null,"size_bytes":5882,"size_tokens":null},"static/js/admin-upload.js":{"content":"const MAX_FILE_SIZE = 25 * 1024 * 1024; // 25MB\n\nlet accumulatedFiles = [];\n\nfunction initFileUpload() {\n    const fileInput = document.getElementById('file-input');\n    const preview = document.getElementById('file-preview');\n    const uploadZone = document.getElementById('upload-zone');\n    const mainForm = document.getElementById('main-form');\n    \n    if (!fileInput || !preview || !uploadZone) return;\n    \n    accumulatedFiles = [];\n    \n    fileInput.addEventListener('change', function() {\n        let hasOversized = false;\n        \n        Array.from(this.files).forEach((file) => {\n            const isDuplicate = accumulatedFiles.some(f => f.name === file.name && f.size === file.size);\n            if (isDuplicate) return;\n            \n            if (file.size > MAX_FILE_SIZE) {\n                hasOversized = true;\n                addPreviewItem(file, true);\n            } else {\n                accumulatedFiles.push(file);\n                addPreviewItem(file, false);\n            }\n        });\n        \n        updateFileInput();\n        \n        if (hasOversized) {\n            alert('Một số file quá lớn (>25MB). Vui lòng giảm kích thước ảnh hoặc chọn file khác.');\n        }\n    });\n    \n    uploadZone.addEventListener('dragover', function(e) {\n        e.preventDefault();\n        this.classList.add('border-primary', 'bg-primary/5');\n    });\n    \n    uploadZone.addEventListener('dragleave', function(e) {\n        e.preventDefault();\n        this.classList.remove('border-primary', 'bg-primary/5');\n    });\n    \n    uploadZone.addEventListener('drop', function(e) {\n        e.preventDefault();\n        this.classList.remove('border-primary', 'bg-primary/5');\n        \n        let hasOversized = false;\n        Array.from(e.dataTransfer.files).forEach((file) => {\n            const isDuplicate = accumulatedFiles.some(f => f.name === file.name && f.size === file.size);\n            if (isDuplicate) return;\n            \n            if (file.size > MAX_FILE_SIZE) {\n                hasOversized = true;\n                addPreviewItem(file, true);\n            } else {\n                accumulatedFiles.push(file);\n                addPreviewItem(file, false);\n            }\n        });\n        \n        updateFileInput();\n        \n        if (hasOversized) {\n            alert('Một số file quá lớn (>25MB). Vui lòng giảm kích thước ảnh hoặc chọn file khác.');\n        }\n    });\n    \n    if (mainForm) {\n        mainForm.addEventListener('submit', function(e) {\n            for (let i = 0; i < accumulatedFiles.length; i++) {\n                if (accumulatedFiles[i].size > MAX_FILE_SIZE) {\n                    e.preventDefault();\n                    alert('Một số file quá lớn (>25MB). Vui lòng xóa hoặc giảm kích thước ảnh trước khi lưu.');\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n}\n\nfunction addPreviewItem(file, isOversized) {\n    const preview = document.getElementById('file-preview');\n    if (!preview) return;\n    \n    const div = document.createElement('div');\n    div.className = 'relative';\n    div.setAttribute('data-filename', file.name);\n    div.setAttribute('data-filesize', file.size);\n    \n    if (isOversized) {\n        div.innerHTML = `\n            <div class=\"w-full h-32 bg-red-100 rounded-lg flex items-center justify-center\">\n                <i class=\"fas fa-exclamation-triangle text-red-500 text-2xl\"></i>\n            </div>\n            <span class=\"absolute bottom-0 left-0 right-0 bg-red-500 text-white text-xs p-1 text-center rounded-b-lg truncate\">${file.name} (quá lớn - ${(file.size/1024/1024).toFixed(1)}MB)</span>\n        `;\n        preview.appendChild(div);\n    } else {\n        const reader = new FileReader();\n        reader.onload = function(e) {\n            div.innerHTML = `\n                <img src=\"${e.target.result}\" alt=\"Preview\" class=\"w-full h-32 object-cover rounded-lg\">\n                <span class=\"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 text-center rounded-b-lg truncate\">${file.name}</span>\n                <button type=\"button\" onclick=\"removeFile('${file.name}', ${file.size})\" class=\"absolute top-1 right-1 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm shadow-lg\">\n                    <i class=\"fas fa-times\"></i>\n                </button>\n            `;\n            preview.appendChild(div);\n        };\n        reader.readAsDataURL(file);\n    }\n}\n\nfunction removeFile(filename, filesize) {\n    accumulatedFiles = accumulatedFiles.filter(f => !(f.name === filename && f.size === filesize));\n    \n    const preview = document.getElementById('file-preview');\n    if (preview) {\n        const items = preview.querySelectorAll('[data-filename]');\n        items.forEach(item => {\n            if (item.getAttribute('data-filename') === filename && \n                parseInt(item.getAttribute('data-filesize')) === filesize) {\n                item.remove();\n            }\n        });\n    }\n    \n    updateFileInput();\n}\n\nfunction updateFileInput() {\n    const fileInput = document.getElementById('file-input');\n    if (!fileInput) return;\n    \n    const dt = new DataTransfer();\n    accumulatedFiles.forEach(file => {\n        dt.items.add(file);\n    });\n    fileInput.files = dt.files;\n}\n\nfunction clearAllFiles() {\n    accumulatedFiles = [];\n    const preview = document.getElementById('file-preview');\n    if (preview) {\n        preview.innerHTML = '';\n    }\n    updateFileInput();\n}\n\nfunction addImageField() {\n    const container = document.getElementById('images-container');\n    if (!container) return;\n    \n    const div = document.createElement('div');\n    div.className = 'flex items-center space-x-3 image-row';\n    div.innerHTML = `\n        <input type=\"url\" name=\"images[]\" class=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"https://example.com/image.jpg\">\n        <button type=\"button\" onclick=\"this.parentElement.remove()\" class=\"text-red-600 hover:text-red-800 p-2\">\n            <i class=\"fas fa-times\"></i>\n        </button>\n    `;\n    container.appendChild(div);\n}\n\nfunction addVideoField() {\n    const container = document.getElementById('videos-container');\n    if (!container) return;\n    \n    const div = document.createElement('div');\n    div.className = 'p-4 bg-gray-50 rounded-lg video-row';\n    div.innerHTML = `\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <input type=\"url\" name=\"video_urls[]\" class=\"px-4 py-2 border border-gray-300 rounded-lg\" placeholder=\"URL embed YouTube\">\n            <input type=\"text\" name=\"video_titles_vi[]\" class=\"px-4 py-2 border border-gray-300 rounded-lg\" placeholder=\"Tiêu đề (VI)\">\n            <div class=\"flex items-center space-x-2\">\n                <input type=\"text\" name=\"video_titles_en[]\" class=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg\" placeholder=\"Tiêu đề (EN)\">\n                <button type=\"button\" onclick=\"this.closest('.video-row').remove()\" class=\"text-red-600 p-2\"><i class=\"fas fa-times\"></i></button>\n            </div>\n        </div>\n    `;\n    container.appendChild(div);\n}\n\ndocument.addEventListener('DOMContentLoaded', initFileUpload);\n","path":null,"size_bytes":7328,"size_tokens":null}},"version":2}